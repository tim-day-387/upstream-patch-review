<html lang="en">
<body>
<pre>
LU-11509 misc: add script lfru-performance.sh

LFRU was introduced to provide scan-resistant, which was validated in
sanity-test-124g. Furthermore, it ensures that high-priority locks
are more likely to remain in the cache, improving overall system
stability and performance under mixed workloads.

1. A new benchmark test, `lfru-performance.sh`, was introduced to
compare LFRU against LRU. This test simulates a workload where both
hot and cold files are accessed with a 50:50 ratio, involving 800 hot
files and 16,000 cold files, and fixed sized cache size.

The LFRU algorithm reduced the number of lock-RPCs (measured by
`ldlm-enqueue` calls) by ~8% compared to the LRU policy.

| Test Run | LFRU Enqueues | LRU Enqueues | Improvement |
| 1        | 160075        | 174250       | 8%          |
| 2        | 159372        | 175925       | 9%          |
| 3        | 159488        | 174533       | 8%          |
| 4        | 159712        | 175481       | 8%          |
| 5        | 159986        | 174493       | 8%          |

The benchmark results showed that LFRU outperforms LRU in this
mixed-access scenario.

2. We have updated ldlm_lfru_priv_too_many() so that the eviction
trigger for priv_lock is now primarily based on its ratio to
total_lock_counts. The use of LDLM_DEFAULT_LRU_SIZE has been removed.

Signed-off-by: Keguang Xu <squalfof@gmail.com>
Change-Id: I60903947180fb8c2b4e1a74e94cb2c5bb387d9d5

</pre>
</body>
</html>
