UPDATE ROOT IMAGE ... done
P+q6E616D65\[6n[32766;32766H[6n[!p]104[?7h[1G[0J]3008;start=318d2b6893e044f486056b4d1753f09f;user=root;hostname=lustre-bot-kvm;machineid=a79734507b7a4cd085276a3f8d51378f;bootid=867f26bfb47844e79e8dbd2b58fa4228;pid=1;pidfdid=2;comm=systemd;type=boot\Kernel version: 6.14.0-ktest
hook init_noop

Running tests llog-unit

========= TEST   llog-unit

/workspace/lustre-release/lustre/tests/test-framework.sh: line 6803: cd: HOME not set
cat: /etc/system-release: No such file or directory
mgs: 
MGS_OS_ID=debian
MGS_OS_VERSION_CODE=0
MGS_OS_ID_LIKE= debian
cat: /etc/system-release: No such file or directory
mds1: 
MDS1_OS_ID=debian
MDS1_OS_VERSION_CODE=0
MDS1_OS_ID_LIKE= debian
cat: /etc/system-release: No such file or directory
ost1: 
OST1_OS_VERSION_CODE=0
OST1_OS_ID=debian
OST1_OS_ID_LIKE= debian
cat: /etc/system-release: No such file or directory
client: 
CLIENT_OS_ID_LIKE= debian
CLIENT_OS_ID=debian
CLIENT_OS_VERSION_CODE=0
Loading modules from /workspace/lustre-release/lustre
detected 16 online CPUs by sysfs
MODOPTS_LIBCFS=
libcfs will create CPU partition based on online CPUs
libcfs: loading out-of-tree module taints kernel.
Key type ._llcrypt registered
Key type .llcrypt registered
libcfs: HW NUMA nodes: 1, HW CPU cores: 16, npartitions: 1
Lustre: Lustre: Build Version: 2.17.50_32_gadcebcb
ptlrpc/ptlrpc options: 'lbug_on_grant_miscount=1'
LNet: Added LNI 10.0.2.15@tcp [8/256/0/180]
gss/krb5 is not supported
Lustre: Echo OBD driver; http://www.lustre.org/
quota/lquota options: 'hash_lqs_cur_bits=3'
/workspace/lustre-release/lustre/tests/test-framework.sh: line 6803: cd: HOME not set
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
arg[0] = /workspace/lustre-release/lustre/utils/mount.lustre
arg[1] = -v
arg[2] = lustre-wbcfs
arg[3] = /mnt/lustre-mgs
source = lustre-wbcfs (lustre-wbcfs), target = /mnt/lustre-mgs
options(0/4096) = 
Lustre is using wbcfs as backend
checking for existing Lustre data: found
OSD_WBC_TGT_TYPE=MGT
OSD_WBC_FSNAME=lustre
OSD_WBC_INDEX=0
svname -> lustre:MGS0000
OSD_WBC_MGS_NID=10.0.2.15@tcp
mounting device lustre-wbcfs at /mnt/lustre-mgs, flags=0x1000000 options=osd=osd-wbcfs,mgs,virgin,update,svname=lustre-MGS0000,device=lustre-wbcfs
Lustre: lustre-MGS0000: mounting server target with '-t lustre' deprecated, use '-t lustre_tgt'
/workspace/lustre-release/lustre/tests/test-framework.sh: line 6803: cd: HOME not set
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
Lustre: DEBUG MARKER: Attempt llog unit tests
Lustre: 2125:0:(llog_test.c:3312:llog_test_device_init()) Setup llog-test device over MGS device
Lustre: 2125:0:(llog_test.c:106:llog_test_1()) 1a: create a log with name: 893579d3
Lustre: 2125:0:(llog_test.c:123:llog_test_1()) 1b: close newly-created log
Lustre: 2125:0:(llog_test.c:154:llog_test_2()) 2a: re-open a log with name: 893579d3
Lustre: 2125:0:(llog_test.c:174:llog_test_2()) 2b: create a log without specified NAME & LOGID
Lustre: 2125:0:(llog_test.c:192:llog_test_2()) 2b: write 1 llog records, check llh_count
Lustre: 2125:0:(llog_test.c:205:llog_test_2()) 2c: re-open the log by LOGID and verify llh_count
Lustre: 2125:0:(llog_test.c:252:llog_test_2()) 2d: destroy this log
Lustre: 2125:0:(llog_test.c:416:llog_test_3()) 3a: write 1023 fixed-size llog records
Lustre: 2125:0:(llog_test.c:380:llog_test3_process()) test3: processing records from index 501 to the end
Lustre: 2125:0:(llog_test.c:390:llog_test3_process()) test3: total 525 records processed with 0 paddings
Lustre: 2125:0:(llog_test.c:474:llog_test_3()) 3b: write 566 variable size llog records
Lustre: 2125:0:(llog_test.c:548:llog_test_3()) 3c: write records with variable size until BITMAP_SIZE, return -ENOSPC
Lustre: 2125:0:(llog_test.c:571:llog_test_3()) 3c: wrote 63962 more records before end of llog is reached
Lustre: 2125:0:(llog_test.c:600:llog_test_4()) 4a: create a catalog log with name: 893579d4
Lustre: 2125:0:(llog_test.c:615:llog_test_4()) 4b: write 1 record into the catalog
Lustre: 2125:0:(llog_test.c:642:llog_test_4()) 4c: cancel 1 log record
Lustre: 2125:0:(llog_test.c:654:llog_test_4()) 4d: write 64766 more log records
Lustre: 2125:0:(llog_test.c:670:llog_test_4()) 4e: add 5 large records, one record per block
Lustre: 2125:0:(llog_test.c:690:llog_test_4()) 4f: put newly-created catalog
Lustre: 2125:0:(llog_test.c:789:llog_test_5()) 5a: re-open catalog by id
Lustre: 2125:0:(llog_test.c:802:llog_test_5()) 5b: print the catalog entries.. we expect 2
Lustre: 2133:0:(llog_test.c:719:cat_print_cb()) seeing record at index 1 - [0x1:0x3:0x0] in log [0xa:0x4:0x0]
Lustre: 2125:0:(llog_test.c:814:llog_test_5()) 5c: Cancel 64766 records, see one log zapped
Lustre: 2125:0:(llog_test.c:822:llog_test_5()) 5c: print the catalog entries.. we expect 1
Lustre: 2134:0:(llog_test.c:719:cat_print_cb()) seeing record at index 2 - [0x1:0x4:0x0] in log [0xa:0x4:0x0]
Lustre: 2134:0:(llog_test.c:719:cat_print_cb()) Skipped 1 previous similar message
Lustre: 2125:0:(llog_test.c:834:llog_test_5()) 5d: add 1 record to the log with many canceled empty pages
Lustre: 2125:0:(llog_test.c:842:llog_test_5()) 5e: print plain log entries.. expect 6
Lustre: 2125:0:(llog_test.c:854:llog_test_5()) 5f: print plain log entries reversely.. expect 6
Lustre: 2125:0:(llog_test.c:868:llog_test_5()) 5g: close re-opened catalog
Lustre: 2125:0:(llog_test.c:898:llog_test_6()) 6a: re-open log 893579d3 using client API
Lustre: MGS: non-config logname received: 893579d3
Lustre: 2125:0:(llog_test.c:930:llog_test_6()) 6b: process log 893579d3 using client API
Lustre: 2125:0:(llog_test.c:934:llog_test_6()) 6b: processed 63962 records
Lustre: 2125:0:(llog_test.c:941:llog_test_6()) 6c: process log 893579d3 reversely using client API
Lustre: 2125:0:(llog_test.c:945:llog_test_6()) 6c: processed 63962 records
Lustre: 2125:0:(llog_test.c:1092:llog_test_7()) 7a: test llog_logid_rec
Lustre: 2125:0:(llog_test.c:1103:llog_test_7()) 7b: test llog_unlink64_rec
Lustre: 2125:0:(llog_test.c:1114:llog_test_7()) 7c: test llog_setattr64_rec
Lustre: 2125:0:(llog_test.c:1125:llog_test_7()) 7d: test llog_size_change_rec
Lustre: 2125:0:(llog_test.c:1136:llog_test_7()) 7e: test llog_changelog_rec
Lustre: 2125:0:(llog_test.c:1043:llog_test_7_sub()) 7_sub: records are not aligned, written 64071 from 64767
Lustre: 2125:0:(llog_test.c:1148:llog_test_7()) 7f: test llog_changelog_user_rec2
Lustre: 2125:0:(llog_test.c:1043:llog_test_7_sub()) 7_sub: records are not aligned, written 64139 from 64767
Lustre: 2125:0:(llog_test.c:1159:llog_test_7()) 7g: test llog_gen_rec
Lustre: 2125:0:(llog_test.c:1170:llog_test_7()) 7h: test llog_setattr64_rec_v2
Lustre: 2125:0:(llog_test.c:1043:llog_test_7_sub()) 7_sub: records are not aligned, written 64071 from 64767
Lustre: 2125:0:(llog_test.c:1279:llog_test_8()) 8a: fill the first plain llog
Lustre: 2125:0:(llog_test.c:1308:llog_test_8()) 8b: first llog [0x1:0x10:0x0]
Lustre: 2125:0:(llog_test.c:1332:llog_test_8()) 8b: fill the second plain llog
Lustre: 2125:0:(llog_test.c:1356:llog_test_8()) 8b: pin llog [0x1:0x12:0x0]
Lustre: 2125:0:(llog_test.c:1359:llog_test_8()) 8b: clean first llog record in catalog
Lustre: 2125:0:(llog_test.c:1370:llog_test_8()) 8c: corrupt first chunk in the middle
Lustre: 2125:0:(llog_test.c:1373:llog_test_8()) 8c: corrupt second chunk at start
Lustre: 2125:0:(llog_test.c:1376:llog_test_8()) 8d: count survived records
Lustre: 2125:0:(llog_test.c:1406:llog_test_8()) 8d: close re-opened catalog
Lustre: 2125:0:(llog_test.c:1467:llog_test_9()) 9a: test llog_logid_rec
Lustre: 2125:0:(llog_test.c:1451:llog_test_9_sub()) 9_sub: record type 1064553b in log 0x1:0x14:0x0
Lustre: 2125:0:(llog_test.c:1478:llog_test_9()) 9b: test llog_obd_cfg_rec
Lustre: 2125:0:(llog_test.c:1489:llog_test_9()) 9c: test llog_changelog_rec
Lustre: 2125:0:(llog_test.c:1501:llog_test_9()) 9d: test llog_changelog_user_rec2
Lustre: 2125:0:(llog_test.c:1602:llog_test_10()) 10a: create a catalog log with name: 893579d5
Lustre: 2125:0:(llog_test.c:1632:llog_test_10()) 10b: write 64766 log records
Lustre: 2125:0:(llog_test.c:1658:llog_test_10()) 10c: write 129532 more log records
Lustre: 2125:0:(llog_test.c:1690:llog_test_10()) 10c: write 64766 more log records
Lustre: 2125:0:(llog_cat.c:80:llog_cat_new_log()) MGS: there are no more free slots in catalog 893579d5
LustreError: 2125:0:(llog_cat.c:583:llog_cat_add_rec()) MGS: initialization error: rc = -28
Lustre: 2125:0:(llog_test.c:1717:llog_test_10()) 10c: wrote 64014 records then 752 failed with ENOSPC
Lustre: 2125:0:(llog_test.c:1736:llog_test_10()) 10d: Cancel 64766 records, see one log zapped
Lustre: 2125:0:(llog_test.c:1750:llog_test_10()) 10d: print the catalog entries.. we expect 3
Lustre: 2146:0:(llog_test.c:719:cat_print_cb()) seeing record at index 2 - [0x1:0x19:0x0] in log [0xa:0x5:0x0]
Lustre: 2125:0:(llog_test.c:1780:llog_test_10()) 10e: write 64766 more log records
Lustre: 2125:0:(llog_cat.c:80:llog_cat_new_log()) MGS: there are no more free slots in catalog 893579d5
Lustre: 2125:0:(llog_cat.c:80:llog_cat_new_log()) Skipped 751 previous similar messages
LustreError: 2125:0:(llog_cat.c:583:llog_cat_add_rec()) MGS: initialization error: rc = -28
LustreError: 2125:0:(llog_cat.c:583:llog_cat_add_rec()) Skipped 751 previous similar messages
Lustre: 2125:0:(llog_test.c:1807:llog_test_10()) 10e: wrote 64578 records then 188 failed with ENOSPC
Lustre: 2125:0:(llog_test.c:1809:llog_test_10()) 10e: print the catalog entries.. we expect 4
Lustre: 2125:0:(llog_cat.c:971:llog_cat_process_or_fork()) MGS: catlog [0xa:0x5:0x0] crosses index zero
Lustre: 2125:0:(llog_test.c:719:cat_print_cb()) seeing record at index 2 - [0x1:0x19:0x0] in log [0xa:0x5:0x0]
Lustre: 2125:0:(llog_test.c:719:cat_print_cb()) Skipped 2 previous similar messages
Lustre: 2125:0:(llog_test.c:1846:llog_test_10()) 10e: catalog successfully wrap around, last_idx 1, first 1
Lustre: 2125:0:(llog_test.c:1863:llog_test_10()) 10f: Cancel 64766 records, see one log zapped
Lustre: 2125:0:(llog_test.c:1877:llog_test_10()) 10f: print the catalog entries.. we expect 3
Lustre: 2125:0:(llog_cat.c:971:llog_cat_process_or_fork()) MGS: catlog [0xa:0x5:0x0] crosses index zero
Lustre: 2125:0:(llog_cat.c:971:llog_cat_process_or_fork()) Skipped 1 previous similar message
Lustre: 2125:0:(llog_test.c:1908:llog_test_10()) 10f: write 64766 more log records
Lustre: 2125:0:(llog_cat.c:80:llog_cat_new_log()) MGS: there are no more free slots in catalog 893579d5
Lustre: 2125:0:(llog_cat.c:80:llog_cat_new_log()) Skipped 187 previous similar messages
LustreError: 2125:0:(llog_cat.c:583:llog_cat_add_rec()) MGS: initialization error: rc = -28
LustreError: 2125:0:(llog_cat.c:583:llog_cat_add_rec()) Skipped 187 previous similar messages
Lustre: 2125:0:(llog_test.c:1935:llog_test_10()) 10f: wrote 64578 records then 188 failed with ENOSPC
Lustre: 2125:0:(llog_test.c:1943:llog_test_10()) skip, need to fix values to support indexed llog
Lustre: 2125:0:(llog_test.c:2187:llog_test_10()) 10: put newly-created catalog
Lustre: 2125:0:(llog_test.c:2217:llog_test_11()) 11: create a plain nameless log
Lustre: 2125:0:(llog_test.c:2242:llog_test_11()) 11: size 8216 in 0 blocks after 1 rec
Lustre: 2125:0:(llog_test.c:2244:llog_test_11()) 11: add few records
Lustre: 2125:0:(llog_test.c:2261:llog_test_11()) 11: size 10616 in 0 blocks with few recs
lctl (2125): drop_caches: 3
Lustre: 2125:0:(llog_test.c:2286:llog_test_11()) 11: re-open the log by LOGID and verify llh_count
Lustre: 2125:0:(llog_test.c:2301:llog_test_11()) 11: size 10616 in 0 blocks after re-open
Lustre: 2125:0:(llog_test.c:2330:llog_test_12()) 12: open a log with name: 893579d6
Lustre: 2125:0:(llog_test.c:2349:llog_test_12()) 12: no support for gaps in non-indexed llog
LustreError: 2125:0:(llog_test.c:2523:llog_test_13()) 13: re-open log with name 893579d7 failed: 11
LustreError: 2125:0:(llog_test.c:2560:llog_test_13()) 13: wrote 64578 recs
LustreError: 2125:0:(llog_test.c:2585:llog_test_13()) 13: cancel recs in 4 threads
Lustre: 2125:0:(llog_test.c:2687:llog_test_14()) 14: open a log with name: 893579d8
Lustre: 2125:0:(llog_test.c:2719:llog_test_14()) 14: wrote 64578 recs, cancel 256 random recs
Lustre: 2125:0:(llog_test.c:2995:llog_test_15()) 15a: random missing records (indexed llog)
Lustre: 2125:0:(llog_test.c:2795:llog_test_skip_few()) 15: open a log with name: 893579d9
Lustre: 2125:0:(llog_test.c:2821:llog_test_skip_few()) 15: no support for gaps in non-indexed llog
Lustre: 2125:0:(llog_test.c:3006:llog_test_15()) 15b: random missing records (indexed llog)
Lustre: 2125:0:(llog_test.c:2930:llog_test_skip_every()) 15: no support for gaps in non-indexed llog
Lustre: DEBUG MARKER: Finish llog units tests
LustreError: 2160:0:(obd_class.h:479:obd_check_dev()) Device 2 not setup
Lustre: server umount lustre-MGS0000 complete

========= PASSED llog-unit in 94s

Passed: llog-unit
Failed: 
Kernel version: 6.14.0-ktest
TEST SUCCESS
Failed to connect to system scope bus via local transport: No such file or directory
]3008;end=318d2b6893e044f486056b4d1753f09f\EXT4-fs (vda): re-mounted 88f4410a-2dea-4a38-86ba-3ebc2db2db54 ro. Quota mode: none.
ACPI: PM: Preparing to enter system sleep state S5
reboot: Power down
