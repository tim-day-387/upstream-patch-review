LU-19814 lnet: Add lnet_nid2cpt lockless fast-paths

Add lockless fast paths to lnet_nid2cpt() to reduce contention on
the per-CPT ln_net_lock.

The optimization introduces three fast paths:
1. When a valid NI is provided and ni_cpts is NULL (NI uses all
   CPTs), hash directly without taking locks
2. When a valid NI is provided and ni_cpts is set (NI has
   restricted CPTs), read directly from the immutable ni_cpts
   array without taking locks
3. When no NI is provided but no nets have restricted CPT configs,
   hash directly without network lookup

To enable the third optimization, add ln_cpt_restricted_count to
track how many NIs/nets have non-default CPT configurations. When
this counter is zero, lnet_nid2cpt() can safely hash without
acquiring the net_lock.

The fast paths are safe because:
- ni_cpts pointer and array are set once at NI creation and never
  modified afterward, so reading them without locks is safe
- In the receive path, the NI is guaranteed valid (LND shutdown
  must quiesce all receive activity before NI teardown)
- Callers without validity guarantees can pass NULL to force the
  safe slow path

Update lnet_net_append_cpts(), lnet_net_remove_cpts(), and
lnet_net_free() to maintain ln_cpt_restricted_count correctly
when net CPT configurations change.

Also fix lnet_ni_alloc_w_cpt_array() to recognize when ncpts
equals LNET_CPT_NUMBER, treating it the same as ncpts==0 (no
restriction) for consistency.

A two node, 30 second, 4k write test with LST, running with lockstat
kernel debug enabled on kfi network, shows ~2 million acquisitions of
ln_net_lock via lnet_nid2cpt.

  &keys[i]#6        1380675        [<000000004e48f70d>] lnet_nid2cpt+0x3e/0x80 [lnet]
  &keys[i]#6         720160        [<000000004e48f70d>] lnet_nid2cpt+0x3e/0x80 [lnet]
  &keys[i]#2             19        [<000000004e48f70d>] lnet_nid2cpt+0x3e/0x80 [lnet]
  &keys[i]#2              8        [<000000004e48f70d>] lnet_nid2cpt+0x3e/0x80 [lnet]

These acquisitions are eliminated by this patch.

The same test running under default kernel shows ~4% improved
performance.

Without patch:
          Mode       Write MB/S      Write RPC/s
      write_4k       563.24           132341

With patch:
          Mode       Write MB/S      Write RPC/s
      write_4k       585.99           137687

Test-Parameters: trivial
HPE-bug-id: LUS-13211
Signed-off-by: Chris Horn <chris.horn@hpe.com>
Change-Id: Ideaa5eb676c7ae40aa6ee2ed1efc1c54d8f5a37a
