<html lang="en">
<body>
<pre>
P+q6E616D65\[6n[32766;32766H[6n[!p]104[?7h[1G[0J]3008;start=7356fec7e9d8474098b01e863eea6d27;user=root;hostname=lustre-bot-kvm;machineid=a79734507b7a4cd085276a3f8d51378f;bootid=e568455374ea41d983cbaf5f19dcb3af;pid=1;pidfdid=2;comm=systemd;type=boot\Kernel version: 6.14.0-ktest
hook init_noop

Running tests sanity-quick

========= TEST   sanity-quick

0a 0b 0c 0d 0e 1 2 3 4 5 6a 6c 6e 6g 6h 6i 7a 7b 8 9 10 11 12 13 14 15 16 17a 17b 17c 17d 17e 17f 17g 17h 17i 17k 17l 17m 17n 17o 17p 17q 18 19a 19b 19c 19d 20 21 22 23a 23b 23c 23d 24a 24b 24c 24d 24e 24f 24g 24h 24i 24j 24k 24l 24m 24n 24o 24p 24q 24r 24s 24t 24u 24v 24w 24x 24y 24z 24A 24B 24C 24E 24F 24G 24H 25a 25b 26a 26b 26c 26d 26e 26f 27a 27b 27ca 27cb 27cc 27cd 27ce 27cf 27cg 27d 27e 27f 27g 27ga 27i 27j 27k 27l 27m 27n 27o 27oo 27p 27q 27r 27s 27t 27u 27v 27w 27wa 27x 27y 27z 27A 27B 27Ca 27Cb 27Cc 27Cd 27Ce 27Cf 27Cg 27Ci 27Cj 27D 27E 27F 27G 27H 27I 27Ia 27J 27K 27L 27M 27N 27O 27P 27Q 27R 27T 27U 27V 27W 27X 28 29 30a 30b 30c 30d 31a 31b 31c 31d 31e 31f 31g 31h 31i 31j 31k 31l 31m 31n 31o 31p 31q 31r 32a 32b 32c 32d 32e 32f 32g 32h 32i 32j 32k 32l 32m 32n 32o 32p 32q 32r 33aa 33a 33b 33c 33d 33e 33f 33g 33h 33hh 33i 33j 34a 34b 34c 34d 34e 34f 34g 34h 35a 36a 36b 36c 36d 36e 36f 36g 36h 36i 38 39a 39b 39c 39d 39e 39f 39g 39h 39i 39j 39k 39l 39m 39n 39o 39p 39r 39q 39s 39u 40 41 42a 42b 42c 42d 42e 43A 43a 43b 43c 44A 44a 44b 44c 44d 44e 44f 44g 45 46 48a 48b 48c 48d 48e 48f 49 50 51a 51b 51c 51d 51e 51f 52a 52b 53 54a 54b 54c 54d 54e 55a 55b 55c 56a 56b 56bb 56bc 56bd 56c 56ca 56d 56e 56g 56h 56i 56ib 56j 56k 56l 56m 56n 56o 56ob 56oc 56od 56oe 56p 56q 56r 56ra 56rb 56rc 56rd 56re 56rf 56s 56t 56u 56v 56wa 56wb 56wc 56wd 56we 56x 56xB 56xC 56xD 56xa 56xab 56xb 56xc 56xd 56xe 56xf 56xg 56xh 56xi 56xj 56xk 56xl 56y 56z 56aa 56ab 56aca 56acb 56acc 56ba 56ca 56da 56db 56dc 56dd 56ea 56eaa 56eab 56eb 56ebb 56ec 56ed 56eda 56edb 56ef 56eg 56eh 56ei 56ej 56ek 57a 57b 58 59 60a 60b 60c 60d 60e 60f 60g 60h 60i 60j 61a 61b 63a 63b 64a 64b 64c 64d 64e 64f 64g 64h 64i 64j 65a 65b 65c 65d 65e 65f 65g 65h 65i 65j 65k 65l 65m 65n 65o 65p 65q 65r 66 69 70a 71 72a 72b 73 74a 74b 74c 76a 76b 77a 77b 77c 77d 77f 77g 77k 77l 77m 77n 77o 78 79 80 81a 81b 99 100 101a 101b 101c 101d 101e 101f 101g 101h 101i 101j 101m 102a 102b 102c 102d 102f 102h 102ha 102i 102j 102k 102l 102m 102n 102p 102q 102r 102s 102t 103a 103b 103c 103e 103f 104a 104b 104c 104d 105a 105b 105c 105d 105e 105f 105g 105h 105i 106 107 110 116a 116b 117 118a 118b 118c 118d 118f 118g 118h 118i 118j 118k 118l 118m 118n 119a 119b 119c 119e 119f 119g 119h 119i 119j 119m 119n 119o 119p 119q 120a 120b 120c 120d 120e 120f 120g 121 123aa 123ab 123ac 123ad 123b 123c 123d 123e 123f 123g 123h 123i 123j 123k 123l 124a 124b 124c 124d 124e 124f 124g 125 126 127a 127b 127c 127d 127e 128 129 130a 130b 130c 130d 130e 130f 130g 130h 130i 131a 131b 131c 131d 131e 133a 133b 133c 133d 133e 133f 133g 133h 134a 134b 135 136 140 150a 150b 150bb 150c 150d 150e 150f 150g 150h 150ia 150ib 150ic 151 152 153 154A 154B 154C 154a 154b 154c 154d 154e 154ea 154f 154g 154h 154i 155a 155b 155c 155d 155e 155f 155g 155h 156 160a 160b 160c 160d 160e 160f 160g 160h 160i 160j 160k 160l 160m 160n 160o 160p 160q 160s 160t 160u 160v 161a 161b 161c 161d 162a 162b 162c 165a 165b 165c 165d 165e 165f 165g 169 170a 170b 171 172 180a 180b 180c 181 182a 182b 183 184a 184b 184c 184d 184e 184f 185 185a 187a 187b 190a 190b 190c 200 204a 204b 204c 204d 204e 204f 204g 204h 205a 205b 205c 205d 205e 205f 205g 205h 205i 205k 205l 205m 206 207a 207b 208 209 210 212 213 214 215 216 217 218 219 220 221 222a 222b 223 224a 224b 224c 224d 225a 225b 226a 226b 226c 226d 226e 227 228a 228b 228c 229 230a 230b 230c 230d 230e 230f 230g 230h 230i 230j 230k 230l 230m 230n 230o 230p 230q 230r 230s 230t 230u 230v 230w 230x 230y 230z 230A 231a 231b 232a 232b 233a 233b 234 235 236 238 239A 239a 239b 240 241a 241b 242 243 244a 244b 245a 245b 247a 247b 247c 247d 247e 247f 247g 247h 248a 248b 248c 249 250 251a 251b 252 253 254 255a 255b 255c 256 257 258a 258b 259 260 270a 270b 270c 270d 270e 270f 270g 270h 270i 270j 271a 271b 271ba 271c 271d 271f 271g 272a 272b 272c 272d 272e 272f 273a 273b 273c 275 276 277 278 280 300a 300b 300c 300d 300e 300f 300g 300h 300i 300j 300k 300l 300m 300n 300o 300p 300q 300r 300s 300t 300ua 300ub 300uc 300ud 300ue 300uf 300ug 300uh 300ui 300uj 310a 310b 310c 311 312 313 314 315 316 317 318 319 350 360 398a 398b 398c 398d 398e 398f 398g 398h 398i 398j 398k 398l 398m 398n 398o 398p 398q 398r 398s 399a 399b 400a 400b 401a 401aa 401ab 401ac 401ad 401b 401c 401d 401db 401e 401f 401ga 401gb 401gc 402 403 404 405 406 407 408 409 410 411a 411b 412 413A 413a 413b 413c 413d 413e 413f 413g 413h 413i 413j 413k 413l 413z 414 415 416 417 418 419 420 421a 421b 421c 421d 421e 421f 421g 421h 422 423 424 425 426 427 428 429 430a 430b 430c 431 432 433 434 440 442 460d 600a 600b 600c 600d 801a 801b 801c 802b 802c 803a 803b 804 805 806 807a 807b 808 809 810 812a 812b 812c 813 814 815 816 817 818 819a 819b 820 823 831 832 833 834 842 850 851 852 853 854 855 860 900 901 902 903 904 905 906 907 908a 908b 909 910
44d 44e 44f 44g 45 46 48a 48b 48c 48d
44d,44e,44f,44g,45,46,48a,48b,48c,48d
SETUP LUSTRE ... libcfs: loading out-of-tree module taints kernel.
Key type ._llcrypt registered
Key type .llcrypt registered
libcfs: HW NUMA nodes: 1, HW CPU cores: 4, npartitions: 2
Lustre: Lustre: Build Version: 2.16.61_172_g256c062
LNet: Added LNI 10.0.2.15@tcp [8/256/0/180]
Lustre: Echo OBD driver; http://www.lustre.org/
Lustre: DEBUG MARKER: lustre-bot-kvm: executing set_hostid
Lustre: lustre-MDT0000: mounting server target with '-t lustre' deprecated, use '-t lustre_tgt'
Lustre: ctl-lustre-MDT0000: No data found on store. Initialize space.
Lustre: lustre-MDT0000: new disk, initializing
Lustre: lustre-MDT0000: Imperative Recovery not enabled, recovery window 300-900
Lustre: ctl-lustre-MDT0000: super-sequence allocation rc = 0 [0x0000000200000400-0x0000000240000400]:0:mdt
mount.lustre (2707) used greatest stack depth: 23536 bytes left
Lustre: Modifying parameter general.debug_raw_pointers=Y in log params
Lustre: lustre-OST0000: new disk, initializing
Lustre: srv-lustre-OST0000: No data found on store. Initialize space.
Lustre: Skipped 1 previous similar message
Lustre: lustre-OST0000: Imperative Recovery not enabled, recovery window 300-900
Lustre: lustre-OST0001: new disk, initializing
Lustre: srv-lustre-OST0001: No data found on store. Initialize space.
Lustre: lustre-OST0001: Imperative Recovery not enabled, recovery window 300-900
Lustre: ctl-lustre-MDT0000: super-sequence allocation rc = 0 [0x0000000240000400-0x0000000280000400]:0:ost
Lustre: cli-lustre-OST0001-super: Allocated super-sequence [0x0000000280000400-0x00000002c0000400]:1:ost]
Lustre: lustre-OST0000-osc-MDT0000: update sequence from 0x100000000 to 0x240000400
Lustre: Skipped 1 previous similar message
Lustre: lustre-OST0001-osc-MDT0000: update sequence from 0x100010000 to 0x280000400
Lustre: lustre-MDT0000: local client fd41ab43-45c7-4e1e-bb4a-3d07391a1da4 w/o recovery
Lustre: client wants to enable acl, but mdt not!
Lustre: Mounted lustre-client
Lustre: DEBUG MARKER: Using TIMEOUT=100
Lustre: Setting parameter general.lod.*.mdt_hash=crush in log params
done
/workspace/lustre-release/lustre/tests/test-framework.sh: line 6803: cd: HOME not set
cat: /etc/system-release: No such file or directory
mgs: 
MGS_OS_ID=debian
MGS_OS_VERSION_CODE=0
MGS_OS_ID_LIKE= debian
cat: /etc/system-release: No such file or directory
mds1: 
MDS1_OS_ID=debian
MDS1_OS_VERSION_CODE=0
MDS1_OS_ID_LIKE= debian
cat: /etc/system-release: No such file or directory
ost1: 
OST1_OS_VERSION_CODE=0
OST1_OS_ID=debian
OST1_OS_ID_LIKE= debian
cat: /etc/system-release: No such file or directory
client: 
CLIENT_OS_ID_LIKE= debian
CLIENT_OS_ID=debian
CLIENT_OS_VERSION_CODE=0
Started at Fri Dec 26 21:51:41 UTC 2025
lustre-bot-kvm: executing check_config_client /mnt/lustre
Lustre: DEBUG MARKER: lustre-bot-kvm: executing check_config_client /mnt/lustre
lustre-bot-kvm: Checking config lustre mounted on /mnt/lustre
Checking servers environments
Checking clients lustre-bot-kvm environments
lustre-bot-kvm: executing check_logdir /tmp/test_logs/2025-12-26/215140
Lustre: DEBUG MARKER: lustre-bot-kvm: executing check_logdir /tmp/test_logs/2025-12-26/215140
Logging to shared log directory: /tmp/test_logs/2025-12-26/215140
lustre-bot-kvm: executing yml_node
Lustre: DEBUG MARKER: lustre-bot-kvm: executing yml_node
Client: 2.16.61.172
Lustre: DEBUG MARKER: Client: 2.16.61.172
MDS: 2.16.61.172
Lustre: DEBUG MARKER: MDS: 2.16.61.172
OSS: 2.16.61.172
Lustre: DEBUG MARKER: OSS: 2.16.61.172
running: sanity ONLY=44d 44e 44f 44g 45 46 48a 48b 48c 48d 
run_suite sanity /workspace/lustre-release/lustre/tests/sanity.sh
-----============= acceptance-small: sanity ============----- Fri Dec 26 21:51:43 UTC 2025
Lustre: DEBUG MARKER: -----============= acceptance-small: sanity ============----- Fri Dec 26 21:51:43 UTC 2025
Running: bash /workspace/lustre-release/lustre/tests/sanity.sh
cat: /etc/system-release: No such file or directory
mgs: 
MGS_OS_ID=debian
MGS_OS_VERSION_CODE=0
MGS_OS_ID_LIKE= debian debian
cat: /etc/system-release: No such file or directory
mds1: 
MDS1_OS_ID=debian
MDS1_OS_VERSION_CODE=0
MDS1_OS_ID_LIKE= debian debian
cat: /etc/system-release: No such file or directory
ost1: 
OST1_OS_VERSION_CODE=0
OST1_OS_ID=debian
OST1_OS_ID_LIKE= debian debian
cat: /etc/system-release: No such file or directory
client: 
CLIENT_OS_ID_LIKE= debian debian
CLIENT_OS_ID=debian
CLIENT_OS_VERSION_CODE=0
lustre-bot-kvm: /workspace/lustre-release/lustre/tests/except/sanity.0f.ex
lustre-bot-kvm: /workspace/lustre-release/lustre/tests/except/sanity.ex
- see CLIENT_VERSION > v2_15_63-134-gdacc4b6d38 (34618796 > 34553734) for LU-15963, go 312
- need MDS1_VERSION < v2_14_55-100-g8a84c7f9c7 (34618796 < 34486116) for LU-14927, skip 0f
Lustre: DEBUG MARKER: - need MDS1_VERSION < v2_14_55-100-g8a84c7f9c7 (34618796 < 34486116) for LU-14927, skip 0f
- see MDS1_VERSION <= CLIENT_VERSION (34618796 <= 34618796) for LU-18562, go 270a
- need MDS1_VERSION <= 2.14.55-100-g8a84c7f9c7 (34618796 <= 34486116) for LU-14927, skip 0f
Lustre: DEBUG MARKER: - need MDS1_VERSION <= 2.14.55-100-g8a84c7f9c7 (34618796 <= 34486116) for LU-14927, skip 0f
excepting tests: 442 460d 600a 600b 600c 600d_base 600d 801a 801b 801c 802b 802c 803a 803b 804 805 806 807a 807b 808 809 810 812a 812b 812c 813 814 815 816 817 818 819a 819b 820 823 831 832 833 834 842 850 851 852 853 854 855 860 900 901 902 903 904 905 906 907 908a 908b 909 910 42a 42c 42b 118c 118d 407 119i 817 0f 27A 53 66 270a 119e 119f 119g 119h 156 17o 27oo 27z 27F 60a 64i 232 257 278 280 427 801c 818 820 17a 17b 17e 17g 17i 17p 21 25a 25b 26a 26c 26d 26e 26f 27ga 27Q 28 32e 32f 32g 32h 32m 32n 32o 32p 48a 54a 54c 54d 56l 56m 56n 56rd 56xb 56eb 56eg 56eh 56ei 133a 140 170b 162a 226a 27p 27q 34a 31g 31l 31m 36g 44f 130a 130b 130c 130d 130e 130i 430a 51b 56ab 81b 220 413 418 806 52a 52b 102a 102h 102i 102r 102t 154B 154f 154g 160 161c 161d 205a 65k 807 808 812 56 65e 65a 406 205h 208 165 224d 226d 255 258 272 275 277 311 410 414 419 831 313 314 315 317 200 350 398 399 403 404 408 432 433 398a 405 411 421 27Cg 27U 422 424 425 426 428 429 434 442 430b 430c 431 814 833 850 801a 801b 802b 810 812b 842 851 901 903
Lustre: DEBUG MARKER: excepting tests: 442 460d 600a 600b 600c 600d_base 600d 801a 801b 801c 802b 802c 803a 803b 804 805 806 807a 807b 808 809 810 812a 812b 812c 813 814 815 816 817 818 819a 819b 820 823 831 832 833 834 842 850 851 852 853 854 855 860 900 901 902 903 904 905 9
skipping tests SLOW=no: 27m 60i 64b 68 71 135 136 230d 300o 842
Lustre: DEBUG MARKER: skipping tests SLOW=no: 27m 60i 64b 68 71 135 136 230d 300o 842
=== sanity: start setup 21:51:44 (1766785904) ===
Lustre: DEBUG MARKER: === sanity: start setup 21:51:44 (1766785904) ===
lustre-bot-kvm: executing check_config_client /mnt/lustre
Lustre: DEBUG MARKER: lustre-bot-kvm: executing check_config_client /mnt/lustre
lustre-bot-kvm: Checking config lustre mounted on /mnt/lustre
Checking servers environments
Checking clients lustre-bot-kvm environments
Using TIMEOUT=100
Lustre: DEBUG MARKER: Using TIMEOUT=100
osc.lustre-OST0000-osc-ffff88811c476000.idle_timeout=debug
osc.lustre-OST0001-osc-ffff88811c476000.idle_timeout=debug
disable quota as required
Lustre: 5036:0:(mgs_llog.c:1348:mgs_modify_param()) MGS: modify general/lod.*.mdt_hash=crush (mode = 0) failed: rc = -17
=== sanity: finish setup 21:51:45 (1766785905) ===
Lustre: DEBUG MARKER: === sanity: finish setup 21:51:45 (1766785905) ===
running as uid/gid/euid/egid 1000/1000/1000/1000, groups: 1000
 [true]
running as uid/gid/euid/egid 1000/1000/1000/1000, groups: 1000
 [touch] [/mnt/lustre/d0_runas_test/f4176]
preparing for tests involving mounts
mke2fs 1.47.2 (1-Jan-2025)

debug=all

== sanity test 44d: if write at position fails (EFBIG), so should do append ========================================================== 21:51:46 (1766785906)
Lustre: DEBUG MARKER: == sanity test 44d: if write at position fails (EFBIG), so should do append ========================================================== 21:51:46 (1766785906)
1+0 records in
1+0 records out
1 byte copied, 0.00255923 s, 0.4 kB/s
1+0 records in
1+0 records out
1 byte copied, 0.00243111 s, 0.4 kB/s
PASS 44d (0s)

== sanity test 44e: write and read maximal stripes ======= 21:51:47 (1766785907)
Lustre: DEBUG MARKER: == sanity test 44e: write and read maximal stripes ======= 21:51:47 (1766785907)
1+0 records in
1+0 records out
2097152 bytes (2.1 MB, 2.0 MiB) copied, 0.00720193 s, 291 MB/s
1+0 records in
1+0 records out
2097152 bytes (2.1 MB, 2.0 MiB) copied, 0.0498031 s, 42.1 MB/s
1+0 records in
1+0 records out
4194304 bytes (4.2 MB, 4.0 MiB) copied, 0.017466 s, 240 MB/s
1+0 records in
1+0 records out
4194304 bytes (4.2 MB, 4.0 MiB) copied, 0.0508516 s, 82.5 MB/s
PASS 44e (8s)

== sanity test 44f: Check fiemap for sparse files ======== 21:51:54 (1766785914)
Lustre: DEBUG MARKER: == sanity test 44f: Check fiemap for sparse files ======== 21:51:54 (1766785914)
==================================================================
BUG: KASAN: slab-use-after-free in lov_object_fiemap+0x2b51/0x4810 [lov]
Write of size 4 at addr ffff88810904288c by task multiop/7363

CPU: 0 UID: 0 PID: 7363 Comm: multiop Tainted: G           O       6.14.0-ktest #1
Tainted: [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 print_report+0xd0/0x2e0
 ? lov_object_fiemap+0x2b51/0x4810 [lov]
 kasan_report+0xa3/0xe0
 ? lov_object_fiemap+0x2b51/0x4810 [lov]
 lov_object_fiemap+0x2b51/0x4810 [lov]
 cl_object_fiemap+0x16a/0x2c0 [obdclass]
 ll_fiemap+0xada/0x1620 [lustre]
 __x64_sys_ioctl+0x9f8/0x1590
 ? switch_fpu_return+0xd4/0x140
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7fb5f02d78db
Code: 00 48 89 44 24 18 31 c0 48 8d 44 24 60 c7 04 24 10 00 00 00 48 89 44 24 08 48 8d 44 24 20 48 89 44 24 10 b8 10 00 00 00 0f 05 <89> c2 3d 00 f0 ff ff 77 1c 48 8b 44 24 18 64 48 2b 04 25 28 00 00
RSP: 002b:00007ffe2fd3bba0 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 00007ffe2fd3c088 RCX: 00007fb5f02d78db
RDX: 000055ce105b92a0 RSI: 00000000c020660b RDI: 0000000000000003
RBP: 00007ffe2fd3bc20 R08: 00007fb5f03b2ac0 R09: 0000000000000001
R10: 000000000000000a R11: 0000000000000246 R12: 0000000000000000
R13: 00007ffe2fd3c0a8 R14: 00007fb5f05b9000 R15: 000055cdf1522a80
 </TASK>

Allocated by task 7363:
 kasan_save_track+0x2f/0x70
 __kasan_kmalloc+0x72/0x80
 kmem_cache_free+0x149/0x440
 path_openat+0x2594/0x2680
 do_filp_open+0x16f/0x320
 do_sys_openat2+0x8a/0xe0
 __x64_sys_openat+0xf9/0x120
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53

Freed by task 16:
 kasan_save_track+0x2f/0x70
 kasan_save_free_info+0x46/0x50
 __kasan_slab_free+0x37/0x50
 kfree+0x17a/0x460
 slab_free_after_rcu_debug+0x70/0x270
 rcu_do_batch+0x5f1/0x1010
 rcu_core+0x266/0x4e0
 handle_softirqs+0x189/0x4e0
 run_ksoftirqd+0x21/0x30
 smpboot_thread_fn+0x412/0x600
 kthread+0x666/0x7c0
 ret_from_fork+0x34/0x60
 ret_from_fork_asm+0x11/0x20

Last potentially related work creation:
 kasan_save_stack+0x2f/0x50
 kasan_record_aux_stack+0x99/0xa0
 call_rcu+0x87/0x6f0
 path_openat+0x2594/0x2680
 do_filp_open+0x16f/0x320
 do_sys_openat2+0x8a/0xe0
 __x64_sys_openat+0xf9/0x120
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53

The buggy address belongs to the object at ffff888109042880
 which belongs to the cache kmalloc-32 of size 32
The buggy address is located 12 bytes inside of
 freed 32-byte region [ffff888109042880, ffff8881090428a0)

The buggy address belongs to the physical page:
page: refcount:0 mapcount:0 mapping:0000000000000000 index:0x0 pfn:0x109042
flags: 0x8000000000000000(zone=2)
page_type: f5(slab)
raw: 8000000000000000 ffff888100042780 dead000000000100 dead000000000122
raw: 0000000000000000 0000000080400040 00000000f5000000 ffff8881067d5400
page dumped because: kasan: bad access detected

Memory state around the buggy address:
 ffff888109042780: fa fb fb fb fc fc fc fc fa fb fb fb fc fc fc fc
 ffff888109042800: fa fb fb fb fc fc fc fc 00 00 00 00 fc fc fc fc
>ffff888109042880: fa fb fb fb fc fc fc fc fa fb fb fb fc fc fc fc
                      ^
 ffff888109042900: fa fb fb fb fc fc fc fc fa fb fb fb fc fc fc fc
 ffff888109042980: fa fb fb fb fc fc fc fc fa fb fb fb fc fc fc fc
==================================================================
Disabling lock debugging due to kernel taint
Kernel error detected: [   99.533802] BUG: KASAN: slab-use-after-free in lov_object_fiemap+0x2b51/0x4810 [lov]
 sanity test_44f: @@@@@@ FAIL: Error in dmesg detected 
Lustre: DEBUG MARKER: sanity test_44f: @@@@@@ FAIL: Error in dmesg detected
  Trace dump:
  = /workspace/lustre-release/lustre/tests/test-framework.sh:7317:error()
  = /workspace/lustre-release/lustre/tests/test-framework.sh:7698:run_one()
  = /workspace/lustre-release/lustre/tests/test-framework.sh:7756:run_one_logged()
  = /workspace/lustre-release/lustre/tests/test-framework.sh:7556:run_test()
  = /workspace/lustre-release/lustre/tests/sanity.sh:6138:main()
Dumping lctl log to /tmp/test_logs/2025-12-26/215140/sanity.test_44f.*.1766785931.log
Dumping logs only on local client.
test_44f returned 1
FAIL 44f (17s)

== sanity test 44g: test overflow in lov_stripe_size ===== 21:52:11 (1766785931)
Lustre: DEBUG MARKER: == sanity test 44g: test overflow in lov_stripe_size ===== 21:52:11 (1766785931)
1+0 records in
1+0 records out
65536 bytes (66 kB, 64 KiB) copied, 0.00432788 s, 15.1 MB/s
1+0 records in
1+0 records out
65536 bytes (66 kB, 64 KiB) copied, 0.005222 s, 12.5 MB/s
/mnt/lustre/f44g.sanity has size 17179541504 OK
/mnt/lustre/f44g.sanity-2 has size 4294967296 OK
PASS 44g (0s)

== sanity test 45: osc io page accounting ================ 21:52:11 (1766785931)
Lustre: DEBUG MARKER: == sanity test 45: osc io page accounting ================ 21:52:11 (1766785931)
vm.dirty_writeback_centisecs = 0
vm.dirty_writeback_centisecs = 0
vm.dirty_ratio = 50
vm.dirty_background_ratio = 25
executing "echo blah > /mnt/lustre/f45"
before 0, after 4096
executing "> /mnt/lustre/f45"
before 4096, after 0
executing "echo blah > /mnt/lustre/f45"
before 0, after 4096
executing "sync"
before 4096, after 0
executing "echo blah > /mnt/lustre/f45"
before 0, after 4096
executing "cancel_lru_locks osc"
before 4096, after 0
vm.dirty_writeback_centisecs = 500
vm.dirty_background_ratio = 10
vm.dirty_ratio = 20
bash (7576) used greatest stack depth: 23528 bytes left
PASS 45 (0s)

== sanity test 46: dirtying a previously written page ========================================================================== 21:52:11 (1766785931)
Lustre: DEBUG MARKER: == sanity test 46: dirtying a previously written page ========================================================================== 21:52:11 (1766785931)
vm.dirty_writeback_centisecs = 0
vm.dirty_writeback_centisecs = 0
vm.dirty_ratio = 50
vm.dirty_background_ratio = 25
1+0 records in
1+0 records out
4096 bytes (4.1 kB, 4.0 KiB) copied, 0.00125583 s, 3.3 MB/s
1+0 records in
1+0 records out
4096 bytes (4.1 kB, 4.0 KiB) copied, 0.00274462 s, 1.5 MB/s
1+0 records in
1+0 records out
4096 bytes (4.1 kB, 4.0 KiB) copied, 0.000780589 s, 5.2 MB/s
vm.dirty_writeback_centisecs = 500
vm.dirty_background_ratio = 10
vm.dirty_ratio = 20
PASS 46 (1s)

== sanity test 48a: Access renamed working dir (should return errors)=========================================================== 21:52:12 (1766785932)
Lustre: DEBUG MARKER: == sanity test 48a: Access renamed working dir (should return errors)=========================================================== 21:52:12 (1766785932)
mkdir: cannot create directory '.': File exists
rmdir: failed to remove '.': Invalid argument
ln: failed to create symbolic link 'baz': Operation not supported
 sanity test_48a: @@@@@@ FAIL: 'ln -s .' failed after recreating cwd 
Lustre: DEBUG MARKER: sanity test_48a: @@@@@@ FAIL: 'ln -s .' failed after recreating cwd
  Trace dump:
  = /workspace/lustre-release/lustre/tests/test-framework.sh:7317:error()
  = /workspace/lustre-release/lustre/tests/sanity.sh:6248:test_48a()
  = /workspace/lustre-release/lustre/tests/test-framework.sh:7693:run_one()
  = /workspace/lustre-release/lustre/tests/test-framework.sh:7756:run_one_logged()
  = /workspace/lustre-release/lustre/tests/test-framework.sh:7556:run_test()
  = /workspace/lustre-release/lustre/tests/sanity.sh:6251:main()
Dumping lctl log to /tmp/test_logs/2025-12-26/215140/sanity.test_48a.*.1766785932.log
Dumping logs only on local client.
FAIL 48a (0s)

== sanity test 48b: Access removed working dir (should return errors)=========================================================== 21:52:12 (1766785932)
Lustre: DEBUG MARKER: == sanity test 48b: Access removed working dir (should return errors)=========================================================== 21:52:12 (1766785932)
touch: cannot touch 'foo': No such file or directory
mkdir: cannot create directory 'foo': No such file or directory
touch: cannot touch '.foo': No such file or directory
mkdir: cannot create directory '.foo': No such file or directory
ls: cannot access '.': No such file or directory
mkdir: cannot create directory '.': File exists
rmdir: failed to remove '.': Invalid argument
ln: failed to create symbolic link 'foo': No such file or directory
PASS 48b (1s)

== sanity test 48c: Access removed working subdir (should return errors) ========================================================== 21:52:13 (1766785933)
Lustre: DEBUG MARKER: == sanity test 48c: Access removed working subdir (should return errors) ========================================================== 21:52:13 (1766785933)
touch: cannot touch 'foo': No such file or directory
mkdir: cannot create directory 'foo': No such file or directory
touch: cannot touch '.foo': No such file or directory
mkdir: cannot create directory '.foo': No such file or directory
ls: cannot access '.': No such file or directory
mkdir: cannot create directory '.': File exists
rmdir: failed to remove '.': Invalid argument
ln: failed to create symbolic link 'foo': No such file or directory
PASS 48c (0s)

== sanity test 48d: Access removed parent subdir (should return errors) ========================================================== 21:52:13 (1766785933)
Lustre: DEBUG MARKER: == sanity test 48d: Access removed parent subdir (should return errors) ========================================================== 21:52:13 (1766785933)
touch: cannot touch 'foo': No such file or directory
mkdir: cannot create directory 'foo': No such file or directory
touch: cannot touch '.foo': No such file or directory
mkdir: cannot create directory '.foo': No such file or directory
ls: cannot access '.': No such file or directory
ls: cannot access '..': No such file or directory
mkdir: cannot create directory '.': File exists
rmdir: failed to remove '.': Invalid argument
ln: failed to create symbolic link 'foo': No such file or directory
PASS 48d (0s)
resend_count is set to 4 4
resend_count is set to 4 4
resend_count is set to 4 4
resend_count is set to 4 4
resend_count is set to 4 4
== sanity test complete, duration 31 sec ================= 21:52:14 (1766785934)
Lustre: DEBUG MARKER: == sanity test complete, duration 31 sec ================= 21:52:14 (1766785934)
sanity: FAIL: test_48a 'ln -s .' failed after recreating cwd
=== sanity: start cleanup 21:52:14 (1766785934) ===
Lustre: DEBUG MARKER: === sanity: start cleanup 21:52:14 (1766785934) ===
skip cleanup
=== sanity: finish cleanup 21:52:14 (1766785934) ===
Lustre: DEBUG MARKER: === sanity: finish cleanup 21:52:14 (1766785934) ===
debug=super ioctl neterror warning dlmtrace error emerg ha rpctrace vfstrace config console lfsck
sanity returned 1
Finished at Fri Dec 26 21:52:15 UTC 2025 in 35s
/workspace/lustre-release/lustre/tests/auster: completed with rc 0
CLEANUP LUSTRE ... Lustre: setting import lustre-MDT0000_UUID INACTIVE by administrator request
LustreError: 9478:0:(file.c:249:ll_close_inode_openhandle()) lustre-clilmv-ffff88811c476000: inode [0x200000401:0x10c:0x0] mdc close failed: rc = -108
LustreError: 9478:0:(obd_class.h:479:obd_check_dev()) Device 20 not setup
Lustre: Unmounted lustre-client
Lustre: server umount lustre-MDT0000 complete
LustreError: 2716:0:(ldlm_lockd.c:2563:ldlm_cancel_handler()) ldlm_cancel from 0@lo arrived at 1766785946 with bad export cookie 9503782283505496436
LustreError: MGC10.0.2.15@tcp: Connection to MGS (at 0@lo) was lost; in progress operations using this service will fail
LustreError: 9561:0:(obd_class.h:479:obd_check_dev()) Device 12 not setup
LustreError: 9561:0:(obd_class.h:479:obd_check_dev()) Skipped 11 previous similar messages
Lustre: server umount lustre-OST0000 complete
LustreError: 9602:0:(obd_class.h:479:obd_check_dev()) Device 2 not setup
LustreError: 9602:0:(obd_class.h:479:obd_check_dev()) Skipped 1 previous similar message
Lustre: server umount lustre-OST0001 complete
=============================================================================
BUG ll_file_data (Tainted: G    B      O      ): Objects remaining in ll_file_data on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000885c8608 objects=18 used=1 fp=0x00000000042db663 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 0 UID: 0 PID: 9740 Comm: rmmod Tainted: G    B      O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? cleanup_module+0x94/0x750 [lustre]
 kmem_cache_destroy+0x7b/0x150
 cleanup_module+0x94/0x750 [lustre]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f9e6991b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffd564950f8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 000055f82ff3f820 RCX: 00007f9e6991b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 000055f82ff3f880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 000055f82ff3e2a0
R13: 00007ffd564953f0 R14: 000055f82ff3f820 R15: 00007ffd564953f8
 </TASK>
Object 0x00000000f4fdc5fc @offset=5376
------------[ cut here ]------------
kmem_cache_destroy ll_file_data: Slab cache still has objects when called from cleanup_module+0x94/0x750 [lustre]
WARNING: CPU: 0 PID: 9740 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: lustre(O-) lod(O) mdt(O) mgs(O) lquota(O) lfsck(O) mgc(O) mdc(O) lov(O) osc(O) lmv(O) ec(O) fid(O) fld(O) ptlrpc(O) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: ofd(O)]
CPU: 0 UID: 0 PID: 9740 Comm: rmmod Tainted: G    B      O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc900031c7e30 EFLAGS: 00010246
RAX: a7078faad816bf00 RBX: ffff888105e89680 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff888159228d90
RBP: 0000000000000001 R08: ffff888159228d93 R09: 1ffff1102b2451b2
R10: dffffc0000000000 R11: ffffed102b2451b3 R12: ffffffffa2500898
R13: dffffc0000000000 R14: ffffffffa2454944 R15: ffffffffa2500898
FS:  00007f9e6a020340(0000) GS:ffff888159200000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f9e69999941 CR3: 00000001474ab000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? cleanup_module+0x94/0x750 [lustre]
 ? kmem_cache_destroy+0x148/0x150
 cleanup_module+0x94/0x750 [lustre]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f9e6991b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffd564950f8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 000055f82ff3f820 RCX: 00007f9e6991b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 000055f82ff3f880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 000055f82ff3e2a0
R13: 00007ffd564953f0 R14: 000055f82ff3f820 R15: 00007ffd564953f8
 </TASK>
---[ end trace 0000000000000000 ]---
/home/ktest/git/linux/include/linux/pagemap.h:677 module lustre func:__page_cache_alloc has 12288 allocated at module unload
=============================================================================
BUG osc_lock_kmem (Tainted: G    B   W  O      ): Objects remaining in osc_lock_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000b8bb1f49 objects=20 used=1 fp=0x00000000557deef7 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9813 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f554251b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007fff8f182ac8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 000055d3e9c3f820 RCX: 00007f554251b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 000055d3e9c3f880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 000055d3e9c3e2a0
R13: 00007fff8f182dc0 R14: 000055d3e9c3f820 R15: 00007fff8f182dc8
 </TASK>
Object 0x00000000ba8d901e @offset=5712
------------[ cut here ]------------
kmem_cache_destroy osc_lock_kmem: Slab cache still has objects when called from lu_kmem_fini+0x78/0xe0 [obdclass]
WARNING: CPU: 1 PID: 9813 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: mgs(O) lquota(O) mgc(O) osc(O-) ec(O) ptlrpc(O) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: fld(O)]
CPU: 1 UID: 0 PID: 9813 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc900011f7e18 EFLAGS: 00010246
RAX: 5bb4358be0271800 RBX: ffff888105e888c0 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff8881592a8d90
RBP: 0000000000000001 R08: ffff8881592a8d93 R09: 1ffff1102b2551b2
R10: dffffc0000000000 R11: ffffed102b2551b3 R12: dffffc0000000000
R13: dffffc0000000000 R14: ffffffffa09aa578 R15: ffffffffa147ade0
FS:  00007f5542c27340(0000) GS:ffff888159280000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00005633a9374fd0 CR3: 000000010a884000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f554251b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007fff8f182ac8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 000055d3e9c3f820 RCX: 00007f554251b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 000055d3e9c3f880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 000055d3e9c3e2a0
R13: 00007fff8f182dc0 R14: 000055d3e9c3f820 R15: 00007fff8f182dc8
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG osc_extent_kmem (Tainted: G    B   W  O      ): Objects remaining in osc_extent_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000a196f12d objects=27 used=1 fp=0x000000005b21f8d4 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9813 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f554251b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007fff8f182ac8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 000055d3e9c3f820 RCX: 00007f554251b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 000055d3e9c3f880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 000055d3e9c3e2a0
R13: 00007fff8f182dc0 R14: 000055d3e9c3f820 R15: 00007fff8f182dc8
 </TASK>
Object 0x00000000ccfac601 @offset=2664
=============================================================================
BUG osc_extent_kmem (Tainted: G    B   W  O      ): Objects remaining in osc_extent_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x0000000017b4a0b5 objects=27 used=1 fp=0x00000000419f2b46 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9813 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f554251b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007fff8f182ac8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 000055d3e9c3f820 RCX: 00007f554251b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 000055d3e9c3f880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 000055d3e9c3e2a0
R13: 00007fff8f182dc0 R14: 000055d3e9c3f820 R15: 00007fff8f182dc8
 </TASK>
Object 0x00000000a2e1b11a @offset=7696
------------[ cut here ]------------
kmem_cache_destroy osc_extent_kmem: Slab cache still has objects when called from lu_kmem_fini+0x78/0xe0 [obdclass]
WARNING: CPU: 1 PID: 9813 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: mgs(O) lquota(O) mgc(O) osc(O-) ec(O) ptlrpc(O) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: fld(O)]
CPU: 1 UID: 0 PID: 9813 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc900011f7e18 EFLAGS: 00010246
RAX: 5bb4358be0271800 RBX: ffff888105e88dc0 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff8881592a8d90
RBP: 0000000000000001 R08: ffff8881592a8d93 R09: 1ffff1102b2551b2
R10: dffffc0000000000 R11: ffffed102b2551b3 R12: dffffc0000000000
R13: dffffc0000000000 R14: ffffffffa09aa578 R15: ffffffffa147ae60
FS:  00007f5542c27340(0000) GS:ffff888159280000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00005633a9374fd0 CR3: 000000010a884000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f554251b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007fff8f182ac8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 000055d3e9c3f820 RCX: 00007f554251b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 000055d3e9c3f880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 000055d3e9c3e2a0
R13: 00007fff8f182dc0 R14: 000055d3e9c3f820 R15: 00007fff8f182dc8
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG osc_obdo_kmem (Tainted: G    B   W  O      ): Objects remaining in osc_obdo_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x0000000091740146 objects=30 used=1 fp=0x00000000c4036fab flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9813 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f554251b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007fff8f182ac8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 000055d3e9c3f820 RCX: 00007f554251b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 000055d3e9c3f880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 000055d3e9c3e2a0
R13: 00007fff8f182dc0 R14: 000055d3e9c3f820 R15: 00007fff8f182dc8
 </TASK>
Object 0x00000000fa417dbf @offset=2992
=============================================================================
BUG osc_obdo_kmem (Tainted: G    B   W  O      ): Objects remaining in osc_obdo_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000003cc16785 objects=30 used=1 fp=0x0000000001dd4b8b flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9813 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f554251b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007fff8f182ac8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 000055d3e9c3f820 RCX: 00007f554251b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 000055d3e9c3f880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 000055d3e9c3e2a0
R13: 00007fff8f182dc0 R14: 000055d3e9c3f820 R15: 00007fff8f182dc8
 </TASK>
Object 0x000000001474ed1f @offset=4624
------------[ cut here ]------------
kmem_cache_destroy osc_obdo_kmem: Slab cache still has objects when called from lu_kmem_fini+0x78/0xe0 [obdclass]
WARNING: CPU: 1 PID: 9813 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: mgs(O) lquota(O) mgc(O) osc(O-) ec(O) ptlrpc(O) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: fld(O)]
CPU: 1 UID: 0 PID: 9813 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc900011f7e18 EFLAGS: 00010246
RAX: 5bb4358be0271800 RBX: ffff888105e88f00 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff8881592a8d90
RBP: 0000000000000001 R08: ffff8881592a8d93 R09: 1ffff1102b2551b2
R10: dffffc0000000000 R11: ffffed102b2551b3 R12: dffffc0000000000
R13: dffffc0000000000 R14: ffffffffa09aa578 R15: ffffffffa147ae80
FS:  00007f5542c27340(0000) GS:ffff888159280000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00005633a9374fd0 CR3: 000000010a884000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f554251b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007fff8f182ac8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 000055d3e9c3f820 RCX: 00007f554251b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 000055d3e9c3f880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 000055d3e9c3e2a0
R13: 00007fff8f182dc0 R14: 000055d3e9c3f820 R15: 00007fff8f182dc8
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG tgt_session_kmem (Tainted: G    B   W  O      ): Objects remaining in tgt_session_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000005a63a6fc objects=31 used=3 fp=0x00000000cf7e9a71 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 cleanup_module+0xe/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000ae3db6d6 @offset=2376
Object 0x00000000459e9be4 @offset=2640
Object 0x0000000078fa584e @offset=2904
=============================================================================
BUG tgt_session_kmem (Tainted: G    B   W  O      ): Objects remaining in tgt_session_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000db30a22d objects=31 used=1 fp=0x000000001d47a170 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 cleanup_module+0xe/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000b37b0fe4 @offset=0
=============================================================================
BUG tgt_session_kmem (Tainted: G    B   W  O      ): Objects remaining in tgt_session_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x0000000069f6de48 objects=31 used=1 fp=0x000000007c2151aa flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 cleanup_module+0xe/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x000000001ae30a35 @offset=4488
------------[ cut here ]------------
kmem_cache_destroy tgt_session_kmem: Slab cache still has objects when called from lu_kmem_fini+0x78/0xe0 [obdclass]
WARNING: CPU: 1 PID: 9865 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: ec(O) ptlrpc(O-) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: lquota(O)]
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc90001257e10 EFLAGS: 00010246
RAX: e012bcc66db19d00 RBX: ffff888103a83040 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff8881592a8d90
RBP: 0000000000000001 R08: ffff8881592a8d93 R09: 1ffff1102b2551b2
R10: dffffc0000000000 R11: ffffed102b2551b3 R12: dffffc0000000000
R13: dffffc0000000000 R14: ffffffffa09aa578 R15: ffffffffa1094c80
FS:  00007ff9b46f7340(0000) GS:ffff888159280000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007ff9b3f99941 CR3: 00000001208e3000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 ? kmem_cache_destroy+0x148/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 cleanup_module+0xe/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG ldlm_resources (Tainted: G    B   W  O      ): Objects remaining in ldlm_resources on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000005069ff6e objects=18 used=5 fp=0x000000007e2ef4c4 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? ldlm_exit+0xa2/0x150 [ptlrpc]
 kmem_cache_destroy+0x7b/0x150
 ldlm_exit+0xa2/0x150 [ptlrpc]
 cleanup_module+0x1d/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x000000004dc101b6 @offset=0
Object 0x00000000020d684e @offset=448
Object 0x00000000f6a77f76 @offset=1344
Object 0x0000000073633984 @offset=2240
Object 0x000000006b40160d @offset=3136
=============================================================================
BUG ldlm_resources (Tainted: G    B   W  O      ): Objects remaining in ldlm_resources on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x0000000027a7e9f1 objects=18 used=1 fp=0x000000008b093e3d flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? ldlm_exit+0xa2/0x150 [ptlrpc]
 kmem_cache_destroy+0x7b/0x150
 ldlm_exit+0xa2/0x150 [ptlrpc]
 cleanup_module+0x1d/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x000000006cb3a03b @offset=7168
------------[ cut here ]------------
kmem_cache_destroy ldlm_resources: Slab cache still has objects when called from ldlm_exit+0xa2/0x150 [ptlrpc]
WARNING: CPU: 1 PID: 9865 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: ec(O) ptlrpc(O-) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: lquota(O)]
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc90001257e28 EFLAGS: 00010246
RAX: e012bcc66db19d00 RBX: ffff888103a828c0 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff8881592a8d90
RBP: 0000000000000001 R08: ffff8881592a8d93 R09: 1ffff1102b2551b2
R10: dffffc0000000000 R11: ffffed102b2551b3 R12: ffffffffa10a9f98
R13: dffffc0000000000 R14: ffffffffa0d8fcf2 R15: ffffffffa10a9f98
FS:  00007ff9b46f7340(0000) GS:ffff888159280000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007ff9b3f99941 CR3: 00000001208e3000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? ldlm_exit+0xa2/0x150 [ptlrpc]
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ldlm_exit+0xa2/0x150 [ptlrpc]
 cleanup_module+0x1d/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG ldlm_locks (Tainted: G    B   W  O      ): Objects remaining in ldlm_locks on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x0000000014cb92d1 objects=23 used=8 fp=0x000000003b32a986 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? ldlm_exit+0xd0/0x150 [ptlrpc]
 kmem_cache_destroy+0x7b/0x150
 ldlm_exit+0xd0/0x150 [ptlrpc]
 cleanup_module+0x1d/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000dbb11dd0 @offset=7744
Object 0x000000004dbc59e8 @offset=8448
Object 0x000000005811d9a8 @offset=9152
Object 0x000000000e83052d @offset=9856
Object 0x000000002f70dc6c @offset=10560
Object 0x00000000882dde19 @offset=11264
Object 0x0000000075e5e61e @offset=11968
Object 0x00000000c3ed712a @offset=15488
------------[ cut here ]------------
kmem_cache_destroy ldlm_locks: Slab cache still has objects when called from ldlm_exit+0xd0/0x150 [ptlrpc]
WARNING: CPU: 1 PID: 9865 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: ec(O) ptlrpc(O-) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: lquota(O)]
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc90001257e28 EFLAGS: 00010246
RAX: e012bcc66db19d00 RBX: ffff888103a82a00 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff8881592a8d90
RBP: 0000000000000001 R08: ffff8881592a8d93 R09: 1ffff1102b2551b2
R10: dffffc0000000000 R11: ffffed102b2551b3 R12: ffffffffa10a9f98
R13: dffffc0000000000 R14: ffffffffa0d8fd20 R15: ffffffffa10a9f98
FS:  00007ff9b46f7340(0000) GS:ffff888159280000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007ff9b3f99941 CR3: 00000001208e3000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? ldlm_exit+0xd0/0x150 [ptlrpc]
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ldlm_exit+0xd0/0x150 [ptlrpc]
 cleanup_module+0x1d/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG interval_tree (Tainted: G    B   W  O      ): Objects remaining in interval_tree on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000004b3a8141 objects=25 used=2 fp=0x000000001886ca84 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? ldlm_exit+0xf9/0x150 [ptlrpc]
 kmem_cache_destroy+0x7b/0x150
 ldlm_exit+0xf9/0x150 [ptlrpc]
 cleanup_module+0x1d/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000cb1b2a61 @offset=4800
Object 0x00000000c97fc6ab @offset=5120
=============================================================================
BUG interval_tree (Tainted: G    B   W  O      ): Objects remaining in interval_tree on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000504a6936 objects=25 used=1 fp=0x0000000039846142 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? ldlm_exit+0xf9/0x150 [ptlrpc]
 kmem_cache_destroy+0x7b/0x150
 ldlm_exit+0xf9/0x150 [ptlrpc]
 cleanup_module+0x1d/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000128d37a9 @offset=5440
------------[ cut here ]------------
kmem_cache_destroy interval_tree: Slab cache still has objects when called from ldlm_exit+0xf9/0x150 [ptlrpc]
WARNING: CPU: 1 PID: 9865 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: ec(O) ptlrpc(O-) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: lquota(O)]
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc90001257e28 EFLAGS: 00010246
RAX: e012bcc66db19d00 RBX: ffff888103a82b40 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff8881592a8d90
RBP: 0000000000000001 R08: ffff8881592a8d93 R09: 1ffff1102b2551b2
R10: dffffc0000000000 R11: ffffed102b2551b3 R12: ffffffffa10a9f98
R13: dffffc0000000000 R14: ffffffffa0d8fd49 R15: ffffffffa10a9f98
FS:  00007ff9b46f7340(0000) GS:ffff888159280000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007ff9b3f99941 CR3: 00000001208e3000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? ldlm_exit+0xf9/0x150 [ptlrpc]
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ldlm_exit+0xf9/0x150 [ptlrpc]
 cleanup_module+0x1d/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG ldlm_ibits_node (Tainted: G    B   W  O      ): Objects remaining in ldlm_ibits_node on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000aa497ac8 objects=21 used=5 fp=0x00000000e52dd5cd flags=0x8000000000000200(workingset|zone=2)
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? ldlm_exit+0x122/0x150 [ptlrpc]
 kmem_cache_destroy+0x7b/0x150
 ldlm_exit+0x122/0x150 [ptlrpc]
 cleanup_module+0x1d/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x0000000049cd9ffb @offset=384
Object 0x00000000fcb07aa0 @offset=576
Object 0x00000000fdb76d0e @offset=768
Object 0x000000005d404ddc @offset=1152
Object 0x00000000adef11a6 @offset=3840
------------[ cut here ]------------
kmem_cache_destroy ldlm_ibits_node: Slab cache still has objects when called from ldlm_exit+0x122/0x150 [ptlrpc]
WARNING: CPU: 1 PID: 9865 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: ec(O) ptlrpc(O-) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: lquota(O)]
CPU: 1 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc90001257e28 EFLAGS: 00010246
RAX: e012bcc66db19d00 RBX: ffff888103a82c80 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff8881592a8d90
RBP: 0000000000000001 R08: ffff8881592a8d93 R09: 1ffff1102b2551b2
R10: dffffc0000000000 R11: ffffed102b2551b3 R12: ffffffffa10a9f98
R13: dffffc0000000000 R14: ffffffffa0d8fd72 R15: ffffffffa10a9f98
FS:  00007ff9b46f7340(0000) GS:ffff888159280000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007ff9b3f99941 CR3: 00000001208e3000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? ldlm_exit+0x122/0x150 [ptlrpc]
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ldlm_exit+0x122/0x150 [ptlrpc]
 cleanup_module+0x1d/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
---[ end trace 0000000000000000 ]---
LNet: 9865:0:(lib-ptl.c:967:lnet_clear_lazy_portal()) Active lazy portal 0 on exit
LNetError: 9865:0:(acceptor.c:264:lnet_acceptor_remove_socket()) Interface eth0 not found
LNet: Removed LNI 10.0.2.15@tcp
=============================================================================
BUG lnet_msg (Tainted: G    B   W  O      ): Objects remaining in lnet_msg on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000008dbea80b objects=24 used=8 fp=0x00000000204ea51b flags=0x8000000000000240(workingset|head|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x30c/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x30c/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000f874927f @offset=4592
Object 0x000000002c2196db @offset=5904
Object 0x00000000cc1c8891 @offset=6560
Object 0x000000009494098f @offset=7216
Object 0x000000003e9abd7d @offset=7872
Object 0x000000003c4a3f82 @offset=8528
Object 0x000000005076a6da @offset=9184
Object 0x00000000e8a8a132 @offset=10496
=============================================================================
BUG lnet_msg (Tainted: G    B   W  O      ): Objects remaining in lnet_msg on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000e1a83774 objects=24 used=10 fp=0x0000000009a1687c flags=0x8000000000000240(workingset|head|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x30c/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x30c/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000e634d7f0 @offset=0
Object 0x000000004510f20a @offset=656
Object 0x00000000d1b0e5a2 @offset=1312
Object 0x000000002d3f3440 @offset=1968
Object 0x00000000df47e199 @offset=2624
Object 0x00000000ff7ca1bb @offset=3280
Object 0x00000000dd355d63 @offset=3936
Object 0x00000000c20af45c @offset=4592
Object 0x00000000faf89897 @offset=5248
Object 0x00000000e7e6f24d @offset=5904
=============================================================================
BUG lnet_msg (Tainted: G    B   W  O      ): Objects remaining in lnet_msg on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000007772025b objects=24 used=10 fp=0x000000007f9c1cc8 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x30c/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x30c/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x0000000014332991 @offset=9184
Object 0x000000003d50c2a1 @offset=9840
Object 0x00000000e3476fdb @offset=10496
Object 0x0000000045d891ab @offset=11152
Object 0x000000003cf59fa8 @offset=11808
Object 0x00000000f388a6e7 @offset=12464
Object 0x0000000049fbc6fb @offset=13120
Object 0x00000000a43a1cdf @offset=13776
Object 0x0000000024be71dd @offset=14432
Object 0x00000000c9dd71d4 @offset=15088
=============================================================================
BUG lnet_msg (Tainted: G    B   W  O      ): Objects remaining in lnet_msg on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000004e2aa628 objects=24 used=7 fp=0x00000000d6fb4a35 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x30c/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x30c/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x0000000036b70436 @offset=2624
Object 0x00000000ec33b684 @offset=3280
Object 0x000000005e7e43ce @offset=3936
Object 0x000000001faba1ef @offset=4592
Object 0x00000000aeb93479 @offset=5248
Object 0x000000005021130a @offset=5904
Object 0x00000000a4967c43 @offset=7216
------------[ cut here ]------------
kmem_cache_destroy lnet_msg: Slab cache still has objects when called from lnet_unprepare+0x30c/0x4b0 [lnet]
WARNING: CPU: 0 PID: 9865 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: ec(O) ptlrpc(O-) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: lquota(O)]
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc90001257de0 EFLAGS: 00010246
RAX: e012bcc66db19d00 RBX: ffff88810e1fe780 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff888159228d90
RBP: 0000000000000001 R08: ffff888159228d93 R09: 1ffff1102b2451b2
R10: dffffc0000000000 R11: ffffed102b2451b3 R12: 0000000000000040
R13: dffffc0000000000 R14: ffffffffa0636d3c R15: dffffc0000000000
FS:  00007ff9b46f7340(0000) GS:ffff888159200000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f31f077741c CR3: 00000001208e3000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? lnet_unprepare+0x30c/0x4b0 [lnet]
 ? kmem_cache_destroy+0x148/0x150
 lnet_unprepare+0x30c/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG lnet_small_MDs (Tainted: G    B   W  O      ): Objects remaining in lnet_small_MDs on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000004f2abde8 objects=20 used=1 fp=0x0000000008fc4297 flags=0x8000000000000200(workingset|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x360/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x360/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000c3fabd72 @offset=3600
=============================================================================
BUG lnet_small_MDs (Tainted: G    B   W  O      ): Objects remaining in lnet_small_MDs on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000fe3a50a9 objects=20 used=7 fp=0x000000005b81a3c9 flags=0x8000000000000200(workingset|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x360/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x360/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x000000003dc4cdac @offset=2400
Object 0x00000000c6e68e7f @offset=2600
Object 0x00000000e5b46d38 @offset=2800
Object 0x00000000a5353bce @offset=3000
Object 0x00000000fffbd2a7 @offset=3400
Object 0x0000000009358b8c @offset=3600
Object 0x000000005c6731bb @offset=3800
=============================================================================
BUG lnet_small_MDs (Tainted: G    B   W  O      ): Objects remaining in lnet_small_MDs on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000edd1ccca objects=20 used=3 fp=0x00000000427130e7 flags=0x8000000000000200(workingset|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x360/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x360/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000b3ed931e @offset=800
Object 0x00000000db06936e @offset=1000
Object 0x000000007324c528 @offset=2600
=============================================================================
BUG lnet_small_MDs (Tainted: G    B   W  O      ): Objects remaining in lnet_small_MDs on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000000c796fc1 objects=20 used=2 fp=0x00000000a97d579a flags=0x8000000000000200(workingset|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x360/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x360/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000ebb652d8 @offset=200
Object 0x000000004d446b5e @offset=600
=============================================================================
BUG lnet_small_MDs (Tainted: G    B   W  O      ): Objects remaining in lnet_small_MDs on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000e30eb905 objects=20 used=8 fp=0x00000000938b79cc flags=0x8000000000000200(workingset|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x360/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x360/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x0000000093f0a442 @offset=0
Object 0x000000004e9d27a8 @offset=200
Object 0x00000000d3032453 @offset=400
Object 0x000000002e08bb49 @offset=1000
Object 0x00000000e4cb5890 @offset=2400
Object 0x00000000e3c7c24f @offset=2600
Object 0x00000000ae03010e @offset=3400
Object 0x0000000099ee908b @offset=3800
------------[ cut here ]------------
kmem_cache_destroy lnet_small_MDs: Slab cache still has objects when called from lnet_unprepare+0x360/0x4b0 [lnet]
WARNING: CPU: 0 PID: 9865 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: ec(O) ptlrpc(O-) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: lquota(O)]
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc90001257de0 EFLAGS: 00010246
RAX: e012bcc66db19d00 RBX: ffff88810e1fe3c0 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff888159228d90
RBP: 0000000000000001 R08: ffff888159228d93 R09: 1ffff1102b2451b2
R10: dffffc0000000000 R11: ffffed102b2451b3 R12: 0000000000000040
R13: dffffc0000000000 R14: ffffffffa0636d90 R15: dffffc0000000000
FS:  00007ff9b46f7340(0000) GS:ffff888159200000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f31f077741c CR3: 00000001208e3000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? lnet_unprepare+0x360/0x4b0 [lnet]
 ? kmem_cache_destroy+0x148/0x150
 lnet_unprepare+0x360/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG lnet_MEs (Tainted: G    B   W  O      ): Objects remaining in lnet_MEs on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000816e5c15 objects=34 used=14 fp=0x000000008eab70f0 flags=0x8000000000000200(workingset|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x37c/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x37c/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x00000000ae29e067 @offset=480
Object 0x000000007644952c @offset=1320
Object 0x000000008710f5b4 @offset=1440
Object 0x000000009a80ced9 @offset=2160
Object 0x00000000b651243c @offset=2280
Object 0x000000000a561092 @offset=2640
Object 0x00000000da1479bc @offset=2760
Object 0x00000000dda1f082 @offset=2880
Object 0x00000000d2f5b54b @offset=3120
Object 0x0000000094a7b807 @offset=3240
Object 0x0000000033a7d487 @offset=3600
Object 0x00000000cfb61a26 @offset=3720
Object 0x00000000b1f38e8e @offset=3840
Object 0x00000000882759bb @offset=3960
=============================================================================
BUG lnet_MEs (Tainted: G    B   W  O      ): Objects remaining in lnet_MEs on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000205ab50b objects=34 used=1 fp=0x00000000dcc76111 flags=0x8000000000000200(workingset|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x37c/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x37c/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x000000006add9581 @offset=1680
=============================================================================
BUG lnet_MEs (Tainted: G    B   W  O      ): Objects remaining in lnet_MEs on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x0000000038f1d95b objects=34 used=2 fp=0x00000000e1478ecc flags=0x8000000000000200(workingset|zone=2)
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? irq_work_queue+0x1c/0x90
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lnet_unprepare+0x37c/0x4b0 [lnet]
 kmem_cache_destroy+0x7b/0x150
 lnet_unprepare+0x37c/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x0000000022c36dee @offset=3480
Object 0x00000000b2f8c297 @offset=3600
------------[ cut here ]------------
kmem_cache_destroy lnet_MEs: Slab cache still has objects when called from lnet_unprepare+0x37c/0x4b0 [lnet]
WARNING: CPU: 0 PID: 9865 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: ec(O) ptlrpc(O-) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: lquota(O)]
CPU: 0 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc90001257de0 EFLAGS: 00010246
RAX: e012bcc66db19d00 RBX: ffff88810e1fe280 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff888159228d90
RBP: 0000000000000001 R08: ffff888159228d93 R09: 1ffff1102b2451b2
R10: dffffc0000000000 R11: ffffed102b2451b3 R12: 0000000000000040
R13: dffffc0000000000 R14: ffffffffa0636dac R15: dffffc0000000000
FS:  00007ff9b46f7340(0000) GS:ffff888159200000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f31f077741c CR3: 00000001208e3000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? lnet_unprepare+0x37c/0x4b0 [lnet]
 ? kmem_cache_destroy+0x148/0x150
 lnet_unprepare+0x37c/0x4b0 [lnet]
 ? lnet_peer_discovery_start+0x2c0/0x2c0 [lnet]
 LNetNIFini+0xb3/0x150 [lnet]
 cleanup_module+0x27/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG ptlrpc_cache (Tainted: G    B   W  O      ): Objects remaining in ptlrpc_cache on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000fe48003a objects=26 used=1 fp=0x00000000f30cb525 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 2 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? cleanup_module+0x2c/0x5e0 [ptlrpc]
 kmem_cache_destroy+0x7b/0x150
 cleanup_module+0x2c/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x0000000016a57aea @offset=18240
=============================================================================
BUG ptlrpc_cache (Tainted: G    B   W  O      ): Objects remaining in ptlrpc_cache on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000058fd42d objects=26 used=3 fp=0x00000000cc7d753b flags=0x8000000000000240(workingset|head|zone=2)
CPU: 2 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? cleanup_module+0x2c/0x5e0 [ptlrpc]
 kmem_cache_destroy+0x7b/0x150
 cleanup_module+0x2c/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x0000000072f57ccc @offset=2432
Object 0x00000000b286ca2a @offset=7296
Object 0x0000000011a99206 @offset=17024
=============================================================================
BUG ptlrpc_cache (Tainted: G    B   W  O      ): Objects remaining in ptlrpc_cache on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000ad04e18a objects=26 used=3 fp=0x000000009383f885 flags=0x8000000000000240(workingset|head|zone=2)
CPU: 2 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? cleanup_module+0x2c/0x5e0 [ptlrpc]
 kmem_cache_destroy+0x7b/0x150
 cleanup_module+0x2c/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x0000000068f2c9fc @offset=0
Object 0x00000000fb339c8a @offset=1216
Object 0x000000005a2da108 @offset=24320
=============================================================================
BUG ptlrpc_cache (Tainted: G    B   W  O      ): Objects remaining in ptlrpc_cache on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000e6246d1a objects=26 used=1 fp=0x0000000049aae59d flags=0x8000000000000240(workingset|head|zone=2)
CPU: 2 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? cleanup_module+0x2c/0x5e0 [ptlrpc]
 kmem_cache_destroy+0x7b/0x150
 cleanup_module+0x2c/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
Object 0x0000000064e255ce @offset=23104
------------[ cut here ]------------
kmem_cache_destroy ptlrpc_cache: Slab cache still has objects when called from cleanup_module+0x2c/0x5e0 [ptlrpc]
WARNING: CPU: 2 PID: 9865 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: ec(O) ptlrpc(O-) obdclass(O) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: lquota(O)]
CPU: 2 UID: 0 PID: 9865 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc90001257e38 EFLAGS: 00010246
RAX: e012bcc66db19d00 RBX: ffff88810e1fe140 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff888159328d90
RBP: 0000000000000001 R08: ffff888159328d93 R09: 1ffff1102b2651b2
R10: dffffc0000000000 R11: ffffed102b2651b3 R12: ffffffffa10a9f98
R13: dffffc0000000000 R14: ffffffffa0ef9a4c R15: ffffffffa10a9f98
FS:  00007ff9b46f7340(0000) GS:ffff888159300000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007feda7dd535c CR3: 00000001208e3000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? cleanup_module+0x2c/0x5e0 [ptlrpc]
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 cleanup_module+0x2c/0x5e0 [ptlrpc]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7ff9b3f1b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffe8cb0bf88 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562857daa820 RCX: 00007ff9b3f1b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562857daa880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562857da92a0
R13: 00007ffe8cb0c280 R14: 0000562857daa820 R15: 00007ffe8cb0c288
 </TASK>
---[ end trace 0000000000000000 ]---
=============================================================================
BUG cl_dio_aio_kmem (Tainted: G    B   W  O      ): Objects remaining in cl_dio_aio_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000002b1a897e objects=18 used=1 fp=0x00000000bf7dd7e2 flags=0x8000000000000200(workingset|zone=2)
CPU: 2 UID: 0 PID: 9900 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 cl_global_fini+0x11c/0x2b0 [obdclass]
 cleanup_module+0xcf/0x360 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f0d3b31b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffede77c4c8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562a705b3820 RCX: 00007f0d3b31b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562a705b3880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562a705b22a0
R13: 00007ffede77c7c0 R14: 0000562a705b3820 R15: 00007ffede77c7c8
 </TASK>
Object 0x00000000103e0bb8 @offset=432
=============================================================================
BUG cl_dio_aio_kmem (Tainted: G    B   W  O      ): Objects remaining in cl_dio_aio_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x00000000498a1d33 objects=18 used=1 fp=0x00000000ef3941bb flags=0x8000000000000200(workingset|zone=2)
CPU: 2 UID: 0 PID: 9900 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 cl_global_fini+0x11c/0x2b0 [obdclass]
 cleanup_module+0xcf/0x360 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f0d3b31b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffede77c4c8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562a705b3820 RCX: 00007f0d3b31b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562a705b3880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562a705b22a0
R13: 00007ffede77c7c0 R14: 0000562a705b3820 R15: 00007ffede77c7c8
 </TASK>
Object 0x000000006711f0c5 @offset=432
=============================================================================
BUG cl_dio_aio_kmem (Tainted: G    B   W  O      ): Objects remaining in cl_dio_aio_kmem on __kmem_cache_shutdown()
-----------------------------------------------------------------------------

Slab 0x000000005291d88f objects=18 used=1 fp=0x00000000933f4ec6 flags=0x4000000000000200(workingset|zone=1)
CPU: 2 UID: 0 PID: 9900 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
Call Trace:
 <TASK>
 dump_stack_lvl+0x8c/0xd0
 slab_err+0xa1/0xe0
 ? lock_release+0x62/0x780
 ? _printk+0x5d/0x80
 list_slab_objects+0x39/0x1a0
 __kmem_cache_shutdown+0xa7/0x1e0
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 kmem_cache_destroy+0x7b/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 cl_global_fini+0x11c/0x2b0 [obdclass]
 cleanup_module+0xcf/0x360 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f0d3b31b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffede77c4c8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562a705b3820 RCX: 00007f0d3b31b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562a705b3880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562a705b22a0
R13: 00007ffede77c7c0 R14: 0000562a705b3820 R15: 00007ffede77c7c8
 </TASK>
Object 0x000000006ead8c54 @offset=648
------------[ cut here ]------------
kmem_cache_destroy cl_dio_aio_kmem: Slab cache still has objects when called from lu_kmem_fini+0x78/0xe0 [obdclass]
WARNING: CPU: 2 PID: 9900 at mm/slab_common.c:533 kmem_cache_destroy+0x148/0x150
Modules linked in: ec(O) obdclass(O-) ksocklnd(O) lnet(O) libcfs(O) [last unloaded: ptlrpc(O)]
CPU: 2 UID: 0 PID: 9900 Comm: rmmod Tainted: G    B   W  O       6.14.0-ktest #1
Tainted: [B]=BAD_PAGE, [W]=WARN, [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2 04/01/2014
RIP: 0010:kmem_cache_destroy+0x148/0x150
Code: 16 7f e6 02 48 89 de 5b 41 5e 5d e9 62 84 0a 00 48 8b 53 60 48 c7 c7 87 90 0e 83 48 c7 c6 32 16 12 83 4c 89 f1 e8 48 6b 95 ff <0f> 0b e9 36 ff ff ff 90 66 0f 1f 00 0f 1f 44 00 00 53 48 89 fb e8
RSP: 0018:ffffc90001137db8 EFLAGS: 00010246
RAX: fd87b1f58aec0100 RBX: ffff888105e88640 RCX: 0000000000000027
RDX: 0000000000000001 RSI: 0000000000000004 RDI: ffff888159328d90
RBP: 0000000000000001 R08: ffff888159328d93 R09: 1ffff1102b2651b2
R10: dffffc0000000000 R11: ffffed102b2651b3 R12: dffffc0000000000
R13: 0000000000000030 R14: ffffffffa09aa578 R15: ffffffffa0b12c40
FS:  00007f0d3b11f340(0000) GS:ffff888159300000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 000055e51dfd8b88 CR3: 00000001059e5000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 ? __warn+0x134/0x330
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 ? report_bug+0x2e0/0x4d0
 ? handle_bug+0x5e/0x90
 ? exc_invalid_op+0x1a/0x50
 ? asm_exc_invalid_op+0x1a/0x20
 ? lu_kmem_fini+0x78/0xe0 [obdclass]
 ? kmem_cache_destroy+0x148/0x150
 ? kmem_cache_destroy+0x148/0x150
 lu_kmem_fini+0x78/0xe0 [obdclass]
 cl_global_fini+0x11c/0x2b0 [obdclass]
 cleanup_module+0xcf/0x360 [obdclass]
 __x64_sys_delete_module+0x1e1/0x370
 ? fpregs_assert_state_consistent+0x2d/0xa0
 do_syscall_64+0x6c/0x140
 entry_SYSCALL_64_after_hwframe+0x4b/0x53
RIP: 0033:0x7f0d3b31b417
Code: 73 01 c3 48 8b 0d e1 59 0d 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 b8 b0 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d b1 59 0d 00 f7 d8 64 89 01 48
RSP: 002b:00007ffede77c4c8 EFLAGS: 00000206 ORIG_RAX: 00000000000000b0
RAX: ffffffffffffffda RBX: 0000562a705b3820 RCX: 00007f0d3b31b417
RDX: 0000000000000000 RSI: 0000000000000800 RDI: 0000562a705b3880
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000206 R12: 0000562a705b22a0
R13: 00007ffede77c7c0 R14: 0000562a705b3820 R15: 00007ffede77c7c8
 </TASK>
---[ end trace 0000000000000000 ]---
Key type .llcrypt unregistered
Key type ._llcrypt unregistered
BUG: unable to handle page fault for address: ffffeb8600105d88
</pre>
</body>
</html>
