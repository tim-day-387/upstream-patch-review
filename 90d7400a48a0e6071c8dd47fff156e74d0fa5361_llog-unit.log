UPDATE ROOT IMAGE ... done
c[?7l[2J[0mSeaBIOS (version 1.15.0-1)


iPXE (https://ipxe.org) 00:01.0 C000 PCI2.10 PnP PMM+7FF8ADC0+7FECADC0 C000
Press Ctrl-B to configure iPXE (PCI 00:01.0)...                                                                               


Booting from ROM..c[?7l[2JKernel compiled without mitigations, ignoring 'mitigations'; system may still be vulnerable
P+q6E616D65\[6n[32766;32766H[6n[!p]104[?7h[1G[0J]3008;start=70ae945967c9439aaf6dae6782121d76;user=root;hostname=lustre-bot-kvm;machineid=a79734507b7a4cd085276a3f8d51378f;bootid=e84c16d810b149cb8773f750ef230a21;pid=1;pidfdid=2;comm=systemd;type=boot\Kernel version: 6.16.0-ktest-90d7400a48-20260225
hook init_noop

Running tests llog-unit

========= TEST   llog-unit
/workspace/lustre-release/lustre/tests/test-framework.sh: line 6868: cd: HOME not set
cat: /etc/system-release: No such file or directory
mgs: 
MGS_OS_ID=debian
MGS_OS_VERSION_CODE=0
MGS_OS_ID_LIKE= debian
cat: /etc/system-release: No such file or directory
mds1: 
MDS1_OS_ID=debian
MDS1_OS_VERSION_CODE=0
MDS1_OS_ID_LIKE= debian
cat: /etc/system-release: No such file or directory
ost1: 
OST1_OS_VERSION_CODE=0
OST1_OS_ID=debian
OST1_OS_ID_LIKE= debian
cat: /etc/system-release: No such file or directory
client: 
CLIENT_OS_ID_LIKE= debian
CLIENT_OS_ID=debian
CLIENT_OS_VERSION_CODE=0
Loading modules from /workspace/lustre-release/lustre
detected 16 online CPUs by sysfs
MODOPTS_LIBCFS=
libcfs will create CPU partition based on online CPUs
libcfs: loading out-of-tree module taints kernel.
libcfs: HW NUMA nodes: 1, HW CPU cores: 16, npartitions: 1
Lustre: Lustre: Build Version: 2.17.50_163_g90d7400
ptlrpc/ptlrpc options: 'lbug_on_grant_miscount=1'
LNet: Added LNI 10.0.2.15@tcp [8/256/0/180]
gss/krb5 is not supported
Lustre: Echo OBD driver; http://www.lustre.org/
quota/lquota options: 'hash_lqs_cur_bits=3'
/workspace/lustre-release/lustre/tests/test-framework.sh: line 6868: cd: HOME not set
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
arg[0] = /workspace/lustre-release/lustre/utils/mount.lustre
arg[1] = -v
arg[2] = lustre-wbcfs
arg[3] = /mnt/lustre-mgs
source = lustre-wbcfs (lustre-wbcfs), target = /mnt/lustre-mgs
options(0/4096) = 
Lustre is using wbcfs as backend
checking for existing Lustre data: found
OSD_WBC_TGT_TYPE=MGT
OSD_WBC_FSNAME=lustre
OSD_WBC_INDEX=0
svname -> lustre:MGS0000
OSD_WBC_MGS_NID=10.0.2.15@tcp
mounting device lustre-wbcfs at /mnt/lustre-mgs, flags=0x1000000 options=osd=osd-wbcfs,mgs,virgin,update,svname=lustre-MGS0000,device=lustre-wbcfs
Lustre: lustre-MGS0000: mounting server target with '-t lustre' deprecated, use '-t lustre_tgt'
/workspace/lustre-release/lustre/tests/test-framework.sh: line 6868: cd: HOME not set
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
cat: /etc/system-release: No such file or directory
Lustre: DEBUG MARKER: Attempt llog unit tests
Lustre: 2137:0:(llog_test.c:2454:llog_test_device_init()) Setup llog-test device over MGS device
Lustre: 2137:0:(llog_test.c:98:llog_test_1()) 1a: create a log with name: f789d54
Lustre: 2137:0:(llog_test.c:115:llog_test_1()) 1b: close newly-created log
Lustre: 2137:0:(llog_test.c:146:llog_test_2()) 2a: re-open a log with name: f789d54
Lustre: 2137:0:(llog_test.c:166:llog_test_2()) 2b: create a log without specified NAME & LOGID
Lustre: 2137:0:(llog_test.c:184:llog_test_2()) 2b: write 1 llog records, check llh_count
Lustre: 2137:0:(llog_test.c:197:llog_test_2()) 2c: re-open the log by LOGID and verify llh_count
Lustre: 2137:0:(llog_test.c:244:llog_test_2()) 2d: destroy this log
Lustre: 2137:0:(llog_test.c:404:llog_test_3()) 3a: write 1023 fixed-size llog records
Lustre: 2137:0:(llog_test.c:368:llog_test3_process()) test3: processing records from index 501 to the end
Lustre: 2137:0:(llog_test.c:378:llog_test3_process()) test3: total 525 records processed with 0 paddings
Lustre: 2137:0:(llog_test.c:460:llog_test_3()) 3b: write 566 variable size llog records
Lustre: 2137:0:(llog_test.c:532:llog_test_3()) 3c: write records with variable size until BITMAP_SIZE, return -ENOSPC
Lustre: 2137:0:(llog_test.c:555:llog_test_3()) 3c: wrote 63962 more records before end of llog is reached
Lustre: 2137:0:(llog_test.c:584:llog_test_4()) 4a: create a catalog log with name: f789d55
Lustre: 2137:0:(llog_test.c:599:llog_test_4()) 4b: write 1 record into the catalog
Lustre: 2137:0:(llog_test.c:626:llog_test_4()) 4c: cancel 1 log record
Lustre: 2137:0:(llog_test.c:638:llog_test_4()) 4d: write 64767 more log records
Lustre: 2137:0:(llog_test.c:654:llog_test_4()) 4e: add 5 large records, one record per block
Lustre: 2137:0:(llog_test.c:674:llog_test_4()) 4f: put newly-created catalog
Lustre: 2137:0:(llog_test.c:773:llog_test_5()) 5a: re-open catalog by id
Lustre: 2137:0:(llog_test.c:786:llog_test_5()) 5b: print the catalog entries.. we expect 2
Lustre: 2144:0:(llog_test.c:703:cat_print_cb()) seeing record at index 1 - [0x1:0x3:0x0] in log [0xa:0x4:0x0]
Lustre: 2137:0:(llog_test.c:798:llog_test_5()) 5c: Cancel 64767 records, see one log zapped
Lustre: 2137:0:(llog_test.c:806:llog_test_5()) 5c: print the catalog entries.. we expect 1
Lustre: 2145:0:(llog_test.c:703:cat_print_cb()) seeing record at index 2 - [0x1:0x4:0x0] in log [0xa:0x4:0x0]
Lustre: 2145:0:(llog_test.c:703:cat_print_cb()) Skipped 1 previous similar message
Lustre: 2137:0:(llog_test.c:818:llog_test_5()) 5d: add 1 record to the log with many canceled empty pages
Lustre: 2137:0:(llog_test.c:826:llog_test_5()) 5e: print plain log entries.. expect 6
Lustre: 2137:0:(llog_test.c:838:llog_test_5()) 5f: print plain log entries reversely.. expect 6
Lustre: 2137:0:(llog_test.c:852:llog_test_5()) 5g: close re-opened catalog
Lustre: 2137:0:(llog_test.c:882:llog_test_6()) 6a: re-open log f789d54 using client API
Lustre: MGS: non-config logname received: f789d54
Lustre: 2137:0:(llog_test.c:914:llog_test_6()) 6b: process log f789d54 using client API
Lustre: 2137:0:(llog_test.c:918:llog_test_6()) 6b: processed 63962 records
Lustre: 2137:0:(llog_test.c:925:llog_test_6()) 6c: process log f789d54 reversely using client API
Lustre: 2137:0:(llog_test.c:929:llog_test_6()) 6c: processed 63962 records
Lustre: 2137:0:(llog_test.c:1077:llog_test_7()) 7a: test llog_logid_rec
Lustre: 2137:0:(llog_test.c:1088:llog_test_7()) 7b: test llog_unlink64_rec
Lustre: 2137:0:(llog_test.c:1099:llog_test_7()) 7c: test llog_setattr64_rec
Lustre: 2137:0:(llog_test.c:1110:llog_test_7()) 7d: test llog_size_change_rec
Lustre: 2137:0:(llog_test.c:1121:llog_test_7()) 7e: test llog_changelog_rec
Lustre: 2137:0:(llog_test.c:1028:llog_test_7_sub()) 7_sub: records are not aligned, written 64071 from 64767
Lustre: 2137:0:(llog_test.c:1133:llog_test_7()) 7f: test llog_changelog_user_rec2
Lustre: 2137:0:(llog_test.c:1028:llog_test_7_sub()) 7_sub: records are not aligned, written 64139 from 64767
Lustre: 2137:0:(llog_test.c:1144:llog_test_7()) 7g: test llog_gen_rec
Lustre: 2137:0:(llog_test.c:1155:llog_test_7()) 7h: test llog_setattr64_rec_v2
Lustre: 2137:0:(llog_test.c:1028:llog_test_7_sub()) 7_sub: records are not aligned, written 64071 from 64767
Lustre: 2137:0:(llog_test.c:1264:llog_test_8()) 8a: fill the first plain llog
Lustre: 2137:0:(llog_test.c:1293:llog_test_8()) 8b: first llog [0x1:0x10:0x0]
Lustre: 2137:0:(llog_test.c:1309:llog_test_8()) 8b: fill the second plain llog
Lustre: 2137:0:(llog_test.c:1333:llog_test_8()) 8b: pin llog [0x1:0x12:0x0]
Lustre: 2137:0:(llog_test.c:1336:llog_test_8()) 8b: clean first llog record in catalog
Lustre: 2137:0:(llog_test.c:1347:llog_test_8()) 8c: corrupt first chunk in the middle
Lustre: 2137:0:(llog_test.c:1350:llog_test_8()) 8c: corrupt second chunk at start
Lustre: 2137:0:(llog_test.c:1353:llog_test_8()) 8d: count survived records
Lustre: 2137:0:(llog_test.c:1383:llog_test_8()) 8d: close re-opened catalog
Lustre: 2137:0:(llog_test.c:1444:llog_test_9()) 9a: test llog_logid_rec
Lustre: 2137:0:(llog_test.c:1428:llog_test_9_sub()) 9_sub: record type 1064553b in log 0x1:0x14:0x0
Lustre: 2137:0:(llog_test.c:1455:llog_test_9()) 9b: test llog_obd_cfg_rec
Lustre: 2137:0:(llog_test.c:1466:llog_test_9()) 9c: test llog_changelog_rec
Lustre: 2137:0:(llog_test.c:1478:llog_test_9()) 9d: test llog_changelog_user_rec2
Lustre: 2137:0:(llog_test.c:1579:llog_test_10()) 10a: create a catalog log with name: f789d56
Lustre: 2137:0:(llog_test.c:1609:llog_test_10()) 10b: write 64767 log records
Lustre: 2137:0:(llog_test.c:1635:llog_test_10()) 10c: write 129534 more log records
Lustre: 2137:0:(llog_test.c:1667:llog_test_10()) 10c: write 64767 more log records
Lustre: 2137:0:(llog_cat.c:80:llog_cat_new_log()) MGS: there are no more free slots in catalog f789d56
LustreError: 2137:0:(llog_cat.c:583:llog_cat_add_rec()) MGS: initialization error: rc = -28
Lustre: 2137:0:(llog_test.c:1694:llog_test_10()) 10c: wrote 64011 records then 756 failed with ENOSPC
Lustre: 2137:0:(llog_test.c:1713:llog_test_10()) 10d: Cancel 64767 records, see one log zapped
Lustre: 2137:0:(llog_test.c:1727:llog_test_10()) 10d: print the catalog entries.. we expect 3
Lustre: 2156:0:(llog_test.c:703:cat_print_cb()) seeing record at index 2 - [0x1:0x19:0x0] in log [0xa:0x5:0x0]
Lustre: 2137:0:(llog_test.c:1757:llog_test_10()) 10e: write 64767 more log records
Lustre: 2137:0:(llog_cat.c:80:llog_cat_new_log()) MGS: there are no more free slots in catalog f789d56
Lustre: 2137:0:(llog_cat.c:80:llog_cat_new_log()) Skipped 755 previous similar messages
LustreError: 2137:0:(llog_cat.c:583:llog_cat_add_rec()) MGS: initialization error: rc = -28
LustreError: 2137:0:(llog_cat.c:583:llog_cat_add_rec()) Skipped 755 previous similar messages
Lustre: 2137:0:(llog_test.c:1784:llog_test_10()) 10e: wrote 64578 records then 189 failed with ENOSPC
Lustre: 2137:0:(llog_test.c:1786:llog_test_10()) 10e: print the catalog entries.. we expect 4
Lustre: 2137:0:(llog_cat.c:971:llog_cat_process_or_fork()) MGS: catlog [0xa:0x5:0x0] crosses index zero
Lustre: 2137:0:(llog_test.c:703:cat_print_cb()) seeing record at index 2 - [0x1:0x19:0x0] in log [0xa:0x5:0x0]
Lustre: 2137:0:(llog_test.c:703:cat_print_cb()) Skipped 2 previous similar messages
Lustre: 2137:0:(llog_test.c:1823:llog_test_10()) 10e: catalog successfully wrap around, last_idx 1, first 1
Lustre: 2137:0:(llog_test.c:1840:llog_test_10()) 10f: Cancel 64767 records, see one log zapped
Lustre: 2137:0:(llog_test.c:1854:llog_test_10()) 10f: print the catalog entries.. we expect 3
Lustre: 2137:0:(llog_cat.c:971:llog_cat_process_or_fork()) MGS: catlog [0xa:0x5:0x0] crosses index zero
Lustre: 2137:0:(llog_cat.c:971:llog_cat_process_or_fork()) Skipped 1 previous similar message
Lustre: 2137:0:(llog_test.c:1885:llog_test_10()) 10f: write 64767 more log records
Lustre: 2137:0:(llog_cat.c:80:llog_cat_new_log()) MGS: there are no more free slots in catalog f789d56
Lustre: 2137:0:(llog_cat.c:80:llog_cat_new_log()) Skipped 188 previous similar messages
LustreError: 2137:0:(llog_cat.c:583:llog_cat_add_rec()) MGS: initialization error: rc = -28
LustreError: 2137:0:(llog_cat.c:583:llog_cat_add_rec()) Skipped 188 previous similar messages
Lustre: 2137:0:(llog_test.c:1912:llog_test_10()) 10f: wrote 64578 records then 189 failed with ENOSPC
Lustre: 2137:0:(llog_test.c:1959:llog_test_10()) 10g: Cancel 64767 records, see one log zapped
Lustre: 2137:0:(llog_cat.c:971:llog_cat_process_or_fork()) MGS: catlog [0xa:0x5:0x0] crosses index zero
Lustre: 2137:0:(llog_test.c:1971:llog_test_10()) 10g: print the catalog entries.. we expect 3
Lustre: 2137:0:(llog_cat.c:971:llog_cat_process_or_fork()) MGS: catlog [0xa:0x5:0x0] crosses index zero
Lustre: 2137:0:(llog_test.c:703:cat_print_cb()) seeing record at index 4 - [0x1:0x1b:0x0] in log [0xa:0x5:0x0]
Lustre: 2137:0:(llog_test.c:703:cat_print_cb()) Skipped 6 previous similar messages
Lustre: 2137:0:(llog_test.c:2001:llog_test_10()) 10g: Cancel 64767 records, see one log zapped
Lustre: 2137:0:(llog_test.c:2015:llog_test_10()) 10g: print the catalog entries.. we expect 2
Lustre: 2137:0:(llog_test.c:2053:llog_test_10()) 10g: Cancel 64767 records, see one log zapped
Lustre: 2137:0:(llog_test.c:2067:llog_test_10()) 10g: print the catalog entries.. we expect 1
Lustre: 2137:0:(llog_test.c:2093:llog_test_10()) 10g: llh_cat_idx has also successfully wrapped!
Lustre: 2158:0:(llog_test.c:1538:cat_check_old_cb()) seeing record at index 2 - [0x1:0x1d:0x0] in log [0xa:0x5:0x0]
Lustre: 2137:0:(llog_test.c:2117:llog_test_10()) 10h: write 64767 more log records
LustreError: 2137:0:(llog_osd.c:684:llog_osd_write_rec()) cfs_race id 1317 sleeping
LustreError: 2158:0:(llog.c:682:llog_process_thread()) cfs_fail_race id 1317 waking
LustreError: 2137:0:(llog_osd.c:684:llog_osd_write_rec()) cfs_fail_race id 1317 awake: rc=450
LustreError: 2158:0:(llog.c:682:llog_process_thread()) cfs_fail_race id 1317 waking
Lustre: 2158:0:(llog_test.c:1538:cat_check_old_cb()) seeing record at index 3 - [0x1:0x1e:0x0] in log [0xa:0x5:0x0]
LustreError: 2137:0:(llog_osd.c:684:llog_osd_write_rec()) cfs_fail_race id 1317 waking
Lustre: 2137:0:(llog_test.c:2144:llog_test_10()) 10h: wrote 64767 records then 0 failed with ENOSPC
Lustre: 2137:0:(llog_test.c:2157:llog_test_10()) 10: put newly-created catalog
Lustre: 2137:0:(llog_test.c:2187:llog_test_11()) 11: create a plain nameless log
Lustre: 2137:0:(llog_test.c:2212:llog_test_11()) 11: size 8216 in 0 blocks after 1 rec
Lustre: 2137:0:(llog_test.c:2214:llog_test_11()) 11: add few records
Lustre: 2137:0:(llog_test.c:2231:llog_test_11()) 11: size 10616 in 0 blocks with few recs
lctl (2137): drop_caches: 3
Lustre: 2137:0:(llog_test.c:2256:llog_test_11()) 11: re-open the log by LOGID and verify llh_count
Lustre: 2137:0:(llog_test.c:2271:llog_test_11()) 11: size 10616 in 0 blocks after re-open
Lustre: DEBUG MARKER: Finish llog units tests
Oops: general protection fault, probably for non-canonical address 0xdffffc0000000028: 0000 [#1] SMP KASAN
KASAN: null-ptr-deref in range [0x0000000000000140-0x0000000000000147]
CPU: 14 UID: 0 PID: 2162 Comm: umount Tainted: G           O        6.16.0-ktest-90d7400a48-20260225 #1 NONE 
Tainted: [O]=OOT_MODULE
Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.15.0-1 04/01/2014
RIP: 0010:kasan_byte_accessible+0x12/0x20
Code: ef ff ff 34 01 e9 21 ff ff ff 66 66 66 66 66 2e 0f 1f 84 00 00 00 00 00 66 0f 1f 00 48 c1 ef 03 48 b8 00 00 00 00 00 fc ff df <0f> b6 04 07 3c 08 0f 92 c0 c3 0f 1f 40 00 66 0f 1f 00 e9 87 1c 00
RSP: 0018:ffffc90001b2f6a0 EFLAGS: 00010216
RAX: dffffc0000000000 RBX: ffffffff82a2ac85 RCX: dffffc0000000000
RDX: 0000000000000000 RSI: ffffffff82a2ac85 RDI: 0000000000000028
RBP: 0000000000000001 R08: 0000000000000001 R09: 0000000000000000
R10: 0000000000000000 R11: ffffed1020c4541d R12: 0000000000000140
R13: ffffffff81a1b480 R14: 0000000000000140 R15: 0000000000000000
FS:  00007f234bcd6840(0000) GS:ffff88831f0e0000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007f234bfa27a0 CR3: 0000000105f17000 CR4: 0000000000750eb0
PKRU: 55555554
Call Trace:
 <TASK>
 __kasan_check_byte+0x12/0x30
 lock_acquire+0x7a/0x1f0
 ? __d_lookup+0x5c/0x470
 down_read+0x35/0x2a0
 ? lookup_noperm_unlocked+0x130/0x190
 lookup_noperm_unlocked+0x130/0x190
 lookup_noperm_positive_unlocked+0xf/0x70
 debugfs_lookup+0xa4/0xd0
 debugfs_lookup_and_remove+0xf/0x70
 lproc_mgs_del_live+0xc1/0xf0 [mgs]
 mgs_put_fsdb+0x7d/0x850 [mgs]
 mgs_erase_logs+0x423/0x940 [mgs]
 mgs_params_fsdb_cleanup+0x15/0x20 [mgs]
 mgs_device_fini+0x19e/0x6e0 [mgs]
 class_cleanup+0x10b7/0x1aa0 [obdclass]
 ? _raw_spin_unlock+0x23/0x30
 ? class_name2obd+0x168/0x1a0 [obdclass]
 class_process_config+0x1f80/0x7600 [obdclass]
 ? __kasan_kmalloc+0x72/0x80
 ? class_manual_cleanup+0xba2/0x1b90 [obdclass]
